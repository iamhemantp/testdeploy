"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[40662],{40662:(J,l,n)=>{n.r(l),n.d(l,{SendTwoFactorCodeModule:()=>M});var c=n(81180),v=n(40031),p=n(91860),s=n(12236),f=n(47530),g=n(41840),m=n(44328),F=n(64716),o=n(99468),S=n(3338),h=n(96814),a=n(56223),C=n(32925),T=n(3291);function Z(e,t){if(1&e&&(o.TgZ(0,"option",11),o._uU(1),o.qZA()),2&e){const i=t.$implicit;o.Q6J("value",i),o.xp6(1),o.hij(" ",i," ")}}function w(e,t){if(1&e){const i=o.EpF();o.TgZ(0,"form",4,5),o.NdJ("ngSubmit",function(){o.CHM(i);const d=o.oxw();return o.KtG(d.submit())}),o.TgZ(2,"p"),o._uU(3),o.ALo(4,"localize"),o.qZA(),o.TgZ(5,"div",6)(6,"select",7),o.NdJ("ngModelChange",function(d){o.CHM(i);const u=o.oxw();return o.KtG(u.selectedTwoFactorProvider=d)}),o.YNc(7,Z,2,2,"option",8),o.qZA()(),o.TgZ(8,"div",9)(9,"button",10),o._uU(10),o.ALo(11,"localize"),o.qZA()()()}if(2&e){const i=o.oxw();o.xp6(3),o.Oqu(o.lcZ(4,4,"SendSecurityCode_Information")),o.xp6(3),o.Q6J("ngModel",i.selectedTwoFactorProvider),o.xp6(1),o.Q6J("ngForOf",i.loginService.authenticateResult.twoFactorAuthProviders),o.xp6(3),o.hij(" ",o.lcZ(11,6,"Submit")," ")}}const A=[{path:"",component:(()=>{var e;class t extends g.c{constructor(r,d,u,y){super(r),(0,c.Z)(this,"loginService",void 0),(0,c.Z)(this,"_tokenAuthService",void 0),(0,c.Z)(this,"_router",void 0),(0,c.Z)(this,"selectedTwoFactorProvider",void 0),(0,c.Z)(this,"submitting",!1),this.loginService=d,this._tokenAuthService=u,this._router=y}canActivate(){return!!(this.loginService.authenticateModel&&this.loginService.authenticateResult&&this.loginService.authenticateResult.twoFactorAuthProviders&&this.loginService.authenticateResult.twoFactorAuthProviders.length)}ngOnInit(){this.canActivate()?this.selectedTwoFactorProvider=this.loginService.authenticateResult.twoFactorAuthProviders[0]:this._router.navigate(["account/login"])}submit(){const r=new m.F6t;r.userId=this.loginService.authenticateResult.userId,r.provider=this.selectedTwoFactorProvider,this.submitting=!0,this._tokenAuthService.sendTwoFactorAuthCode(r).pipe((0,F.x)(()=>this.submitting=!1)).subscribe(()=>{this._router.navigate(["account/verify-code"])})}}return e=t,(0,c.Z)(t,"\u0275fac",function(r){return new(r||e)(o.Y36(o.zs3),o.Y36(S.r),o.Y36(m.WH8),o.Y36(s.F0))}),(0,c.Z)(t,"\u0275cmp",o.Xpm({type:e,selectors:[["ng-component"]],features:[o.qOj],decls:6,vars:5,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],[1,"fw-bolder","text-dark","fs-h4","fs-h1-lg"],["class","login-form form","method","post",3,"ngSubmit",4,"ngIf"],["method","post",1,"login-form","form",3,"ngSubmit"],["twoFactorForm","ngForm"],[1,"mb-5"],["autoFocus","","size","1","name","selectedTwoFactorProvider",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","fs-h6",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"pb-lg-0","pb-5"],["type","submit",1,"btn","btn-primary","fw-bolder","fs-h6","px-8","py-4","my-3","me-3"],[3,"value"]],template:function(r,d){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),o._uU(3),o.ALo(4,"localize"),o.qZA()(),o.YNc(5,w,12,8,"form",3),o.qZA()),2&r&&(o.Q6J("@routerTransition",void 0),o.xp6(3),o.hij(" ",o.lcZ(4,3,"SendSecurityCode")," "),o.xp6(2),o.Q6J("ngIf",d.loginService.authenticateResult))},dependencies:[h.sg,h.O5,a._Y,a.YN,a.Kr,a.EJ,a.JJ,a.JL,a.On,a.F,C.h,T.F],encapsulation:2,data:{animation:[(0,f.RP)()]}})),t})(),pathMatch:"full"}];let x=(()=>{var e;class t{}return e=t,(0,c.Z)(t,"\u0275fac",function(r){return new(r||e)}),(0,c.Z)(t,"\u0275mod",o.oAB({type:e})),(0,c.Z)(t,"\u0275inj",o.cJS({imports:[s.Bz.forChild(A),s.Bz]})),t})(),M=(()=>{var e;class t{}return e=t,(0,c.Z)(t,"\u0275fac",function(r){return new(r||e)}),(0,c.Z)(t,"\u0275mod",o.oAB({type:e})),(0,c.Z)(t,"\u0275inj",o.cJS({imports:[v.o,p.y,x]})),t})()}}]);