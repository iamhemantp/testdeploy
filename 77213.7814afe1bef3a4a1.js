"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[77213],{77213:(O,C,l)=>{l.r(C),l.d(C,{DynamicEntityPropertyValueModule:()=>E});var n=l(81180),e=l(8387),f=l(40031),g=l(12236),t=l(40457),r=l(99468);const M=[{path:"",component:t.J,pathMatch:"full"}];let V=(()=>{var h;class y{}return h=y,(0,n.Z)(y,"\u0275fac",function(I){return new(I||h)}),(0,n.Z)(y,"\u0275mod",r.oAB({type:h})),(0,n.Z)(y,"\u0275inj",r.cJS({imports:[g.Bz.forChild(M),g.Bz]})),y})(),E=(()=>{var h;class y{}return h=y,(0,n.Z)(y,"\u0275fac",function(I){return new(I||h)}),(0,n.Z)(y,"\u0275mod",r.oAB({type:h})),(0,n.Z)(y,"\u0275inj",r.cJS({imports:[f.o,e.g,V]})),y})()},40457:(O,C,l)=>{l.d(C,{J:()=>u});var n=l(81180),e=l(99468),f=l(41840),g=l(44328),t=l(73974),r=l(63686),M=l(96814),V=l(94901),E=l(56916),h=l(85219),y=l(3291),T=l(83410);function I(s,p){1&s&&(e.TgZ(0,"tr")(1,"th"),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"th"),e._uU(5),e.ALo(6,"localize"),e.qZA(),e.TgZ(7,"th",7),e._uU(8),e.ALo(9,"localize"),e.qZA()()),2&s&&(e.xp6(2),e.Oqu(e.lcZ(3,3,"PropertyName")),e.xp6(3),e.Oqu(e.lcZ(6,5,"Values")),e.xp6(3),e.Oqu(e.lcZ(9,7,"Actions")))}function Z(s,p){1&s&&e.GkF(0)}function b(s,p){if(1&s){const _=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(_);const m=e.oxw().$implicit,v=e.oxw(2);return e.KtG(v.deleteAllValuesOfDynamicEntityPropertyId(m))}),e._uU(1),e.ALo(2,"localize"),e.qZA()}2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Delete")," "))}function a(s,p){if(1&s&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.YNc(4,Z,1,0,"ng-container",8),e.qZA(),e.TgZ(5,"td"),e.YNc(6,b,3,3,"button",9),e.ALo(7,"permission"),e.qZA()()),2&s){const _=p.$implicit;e.xp6(2),e.hij(" ",_.data.propertyName," "),e.xp6(2),e.Q6J("ngComponentOutlet",_.definition.component)("ngComponentOutletInjector",_.injector),e.xp6(2),e.Q6J("ngIf",e.lcZ(7,4,"Pages.Administration.DynamicEntityPropertyValue.Delete"))}}function o(s,p){1&s&&(e.TgZ(0,"div",11),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NoData")," "))}function c(s,p){if(1&s&&(e.TgZ(0,"div",1)(1,"p-table",2,3),e.YNc(3,I,10,9,"ng-template",4),e.YNc(4,a,8,6,"ng-template",5),e.qZA(),e.YNc(5,o,3,3,"div",6),e.qZA()),2&s){const _=e.oxw();e.Q6J("busyIf",_.primengTableHelper.isLoading),e.xp6(1),e.Q6J("value",_.items)("paginator",!1),e.xp6(4),e.Q6J("ngIf",0==_.items.length)}}class i{constructor(p,_){(0,n.Z)(this,"data",void 0),(0,n.Z)(this,"definition",void 0),(0,n.Z)(this,"injector",void 0),(0,n.Z)(this,"componentInstance",void 0),this.data=p,this.definition=_}}let u=(()=>{var s;class p extends f.c{constructor(d,m,v){super(d),(0,n.Z)(this,"_injector",void 0),(0,n.Z)(this,"_dynamicEntityPropertyValueService",void 0),(0,n.Z)(this,"_inputTypeConfigurationService",void 0),(0,n.Z)(this,"entityFullName",void 0),(0,n.Z)(this,"entityId",void 0),(0,n.Z)(this,"onSaveDone",new e.vpe),(0,n.Z)(this,"initialized",!1),(0,n.Z)(this,"items",void 0),this._injector=d,this._dynamicEntityPropertyValueService=m,this._inputTypeConfigurationService=v}ngOnInit(){this.initialize()}initialize(){this.initialized=!1,this._dynamicEntityPropertyValueService.getAllDynamicEntityPropertyValues(this.entityFullName,this.entityId).subscribe(d=>{d.items&&(this.items=d.items.map(m=>{let v=this._inputTypeConfigurationService.getByInputType(m.inputType),D=new i(m,v),S=e.zs3.create({providers:[{provide:t.cT,useValue:m.selectedValues},{provide:t.TH,useValue:m.allValuesInputTypeHas},{provide:t.Ql,useValue:x=>{D.componentInstance=x}}],parent:this._injector});return D.injector=S,D})),this.initialized=!0,this.hideMainSpinner()},d=>{this.hideMainSpinner()})}deleteAllValuesOfDynamicEntityPropertyId(d){this.message.confirm(this.l("DeleteDynamicEntityPropertyValueMessage",d.data.propertyName),this.l("AreYouSure"),m=>{m&&this._dynamicEntityPropertyValueService.cleanValues(new g.RM({dynamicEntityPropertyId:d.data.dynamicEntityPropertyId,entityId:this.entityId})).subscribe(()=>{abp.notify.success(this.l("SuccessfullyDeleted")),this.initialize()})})}saveAll(){if(!this.items||0===this.items.length)return;let d=[];for(let m=0;m<this.items.length;m++){const v=this.items[m];d.push(new g.COX({dynamicEntityPropertyId:v.data.dynamicEntityPropertyId,entityId:this.entityId,values:v.componentInstance.getSelectedValues()}))}this._dynamicEntityPropertyValueService.insertOrUpdateAllValues(new g.O3u({items:d})).subscribe(()=>{abp.notify.success(this.l("SavedSuccessfully")),this.initialize(),this.hideMainSpinner(),this.onSaveDone&&this.onSaveDone.emit()},m=>{this.hideMainSpinner()})}}return s=p,(0,n.Z)(p,"\u0275fac",function(d){return new(d||s)(e.Y36(e.zs3),e.Y36(g.mQH),e.Y36(r.R))}),(0,n.Z)(p,"\u0275cmp",e.Xpm({type:s,selectors:[["dynamic-entity-property-value-manager"]],inputs:{entityFullName:"entityFullName",entityId:"entityId"},outputs:{onSaveDone:"onSaveDone"},features:[e.qOj],decls:1,vars:1,consts:[["class","col primeng-datatable-container",3,"busyIf",4,"ngIf"],[1,"col","primeng-datatable-container",3,"busyIf"],[3,"value","paginator"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[2,"width","100px"],[4,"ngComponentOutlet","ngComponentOutletInjector"],["class","btn btn-danger bt-sm",3,"click",4,"ngIf"],[1,"btn","btn-danger","bt-sm",3,"click"],[1,"primeng-no-data"]],template:function(d,m){1&d&&e.YNc(0,c,6,4,"div",0),2&d&&e.Q6J("ngIf",m.initialized)},dependencies:[M.$G,M.O5,V.U,E.iA,h.jx,y.F,T.a],encapsulation:2})),p})()},73974:(O,C,l)=>{l.d(C,{Ql:()=>g,TH:()=>f,cT:()=>e});var n=l(99468);const e=new n.OlP("selectedValues"),f=new n.OlP("allValues"),g=new n.OlP("componentInstance")},63686:(O,C,l)=>{l.d(C,{R:()=>b});var n=l(81180),e=l(41840),f=l(73974);class g extends e.c{constructor(o){super(o),(0,n.Z)(this,"selectedValues",void 0),(0,n.Z)(this,"allValues",void 0),this.selectedValues=o.get(f.cT),this.allValues=o.get(f.TH),o.get(f.Ql)(this)}}var t=l(99468),r=l(56223);let M=(()=>{var a;class o extends g{constructor(i){super(i),(0,n.Z)(this,"selectedValue",void 0)}getSelectedValues(){return this.selectedValue?[this.selectedValue]:[]}ngOnInit(){this.selectedValue=this.selectedValues[0]}}return a=o,(0,n.Z)(o,"\u0275fac",function(i){return new(i||a)(t.Y36(t.zs3))}),(0,n.Z)(o,"\u0275cmp",t.Xpm({type:a,selectors:[["app-single-line-string-input-type"]],features:[t.qOj],decls:1,vars:1,consts:[["type","text",1,"form-control",3,"ngModel","ngModelChange"]],template:function(i,u){1&i&&(t.TgZ(0,"input",0),t.NdJ("ngModelChange",function(p){return u.selectedValue=p}),t.qZA()),2&i&&t.Q6J("ngModel",u.selectedValue)},dependencies:[r.Fj,r.JJ,r.On]})),o})(),V=(()=>{var a;class o extends g{constructor(i){super(i),(0,n.Z)(this,"checked",void 0)}ngOnInit(){this.checked=this.selectedValues&&this.selectedValues[0]&&"true"===this.selectedValues[0]}getSelectedValues(){return[this.checked.toString()]}}return a=o,(0,n.Z)(o,"\u0275fac",function(i){return new(i||a)(t.Y36(t.zs3))}),(0,n.Z)(o,"\u0275cmp",t.Xpm({type:a,selectors:[["app-checkbox-input-type"]],features:[t.qOj],decls:4,vars:1,consts:[[1,"checkbox-inline"],[1,"checkbox","checkbox-solid"],["type","checkbox","value","true",3,"ngModel","ngModelChange"]],template:function(i,u){1&i&&(t.TgZ(0,"div",0)(1,"label",1)(2,"input",2),t.NdJ("ngModelChange",function(p){return u.checked=p}),t.qZA(),t._UZ(3,"span"),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("ngModel",u.checked))},dependencies:[r.Wl,r.JJ,r.On]})),o})();var E=l(96814);function h(a,o){if(1&a&&(t.TgZ(0,"option",3),t._uU(1),t.qZA()),2&a){const c=o.$implicit;t.Q6J("value",c),t.xp6(1),t.Oqu(c)}}let y=(()=>{var a;class o extends g{constructor(i){super(i),(0,n.Z)(this,"selectedValue",void 0)}ngOnInit(){this.selectedValue=this.selectedValues[0]}getSelectedValues(){return this.selectedValue?[this.selectedValue]:[]}}return a=o,(0,n.Z)(o,"\u0275fac",function(i){return new(i||a)(t.Y36(t.zs3))}),(0,n.Z)(o,"\u0275cmp",t.Xpm({type:a,selectors:[["app-combobox-input-type"]],features:[t.qOj],decls:3,vars:2,consts:[[1,"form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(i,u){1&i&&(t.TgZ(0,"select",0),t.NdJ("ngModelChange",function(p){return u.selectedValue=p}),t._UZ(1,"option",1),t.YNc(2,h,2,2,"option",2),t.qZA()),2&i&&(t.Q6J("ngModel",u.selectedValue),t.xp6(2),t.Q6J("ngForOf",u.allValues))},dependencies:[E.sg,r.YN,r.Kr,r.EJ,r.JJ,r.On]})),o})();var T=l(77327);let I=(()=>{var a;class o extends g{constructor(i){super(i),(0,n.Z)(this,"filteredValues",void 0)}ngOnInit(){this.filteredValues=this.allValues}getSelectedValues(){return this.selectedValues?this.selectedValues:[]}filter(i){this.filteredValues=this.allValues.filter(u=>u.toLowerCase().includes(i.query.toLowerCase()))}}return a=o,(0,n.Z)(o,"\u0275fac",function(i){return new(i||a)(t.Y36(t.zs3))}),(0,n.Z)(o,"\u0275cmp",t.Xpm({type:a,selectors:[["app-multiple-select-input-type"]],features:[t.qOj],decls:1,vars:4,consts:[["inputStyleClass","form-control","styleClass","width-percent-100",3,"ngModel","suggestions","minLength","multiple","ngModelChange","completeMethod"]],template:function(i,u){1&i&&(t.TgZ(0,"p-autoComplete",0),t.NdJ("ngModelChange",function(p){return u.selectedValues=p})("completeMethod",function(p){return u.filter(p)}),t.qZA()),2&i&&t.Q6J("ngModel",u.selectedValues)("suggestions",u.filteredValues)("minLength",1)("multiple",!0)},dependencies:[r.JJ,r.On,T.Qc],encapsulation:2})),o})();class Z{constructor(o,c,i){(0,n.Z)(this,"name",void 0),(0,n.Z)(this,"component",void 0),(0,n.Z)(this,"hasValues",void 0),this.name=o,this.component=c,this.hasValues=i}}let b=(()=>{var a;class o{constructor(){(0,n.Z)(this,"InputTypeConfigurationDefinitions",void 0),this.initialize()}getByName(i){let u=this.InputTypeConfigurationDefinitions.filter(s=>s.name===i);return u&&1===u.length?u[0]:null}getByInputType(i){return this.getByName(i.name)}initialize(){let i=new Z("SINGLE_LINE_STRING",M,!1),u=new Z("CHECKBOX",V,!1),s=new Z("COMBOBOX",y,!0),p=new Z("MULTISELECTCOMBOBOX",I,!0);this.InputTypeConfigurationDefinitions=[],this.InputTypeConfigurationDefinitions.push(i),this.InputTypeConfigurationDefinitions.push(u),this.InputTypeConfigurationDefinitions.push(s),this.InputTypeConfigurationDefinitions.push(p)}}return a=o,(0,n.Z)(o,"\u0275fac",function(i){return new(i||a)}),(0,n.Z)(o,"\u0275prov",t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})),o})()}}]);