"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[43622],{43622:($e,q,c)=>{c.r(q),c.d(q,{TenantsModule:()=>Be});var s=c(81180),U=c(8387),J=c(40031),b=c(12236),I=c(47530),f=c(41840),u=c(44328),C=c(66232),T=c(64716),e=c(99468),D=c(12990),v=c(58399),g=c(96814),r=c(56223),x=c(73552),h=c(16316),N=c(56906),L=c(76388),F=c(94901),R=c(81243),M=c(56916),P=c(85219),H=c(51712);const Q=["EditionCombobox"];function k(a,l){if(1&a&&(e.TgZ(0,"option",3),e._uU(1),e.qZA()),2&a){const i=l.$implicit;e.Q6J("value",i.value),e.xp6(1),e.Oqu(i.displayText)}}let z=(()=>{var a;class l extends f.c{constructor(n,t){super(t),(0,s.Z)(this,"_editionService",void 0),(0,s.Z)(this,"editionComboboxElement",void 0),(0,s.Z)(this,"selectedEdition",void 0),(0,s.Z)(this,"selectedEditionChange",new e.vpe),(0,s.Z)(this,"editions",[]),this._editionService=n}ngOnInit(){this._editionService.getEditionComboboxItems(0,!0,!1).subscribe(n=>{this.editions=n})}}return a=l,(0,s.Z)(l,"\u0275fac",function(n){return new(n||a)(e.Y36(u.GnT),e.Y36(e.zs3))}),(0,s.Z)(l,"\u0275cmp",e.Xpm({type:a,selectors:[["edition-combo"]],viewQuery:function(n,t){if(1&n&&e.Gf(Q,7),2&n){let o;e.iGM(o=e.CRH())&&(t.editionComboboxElement=o.first)}},inputs:{selectedEdition:"selectedEdition"},outputs:{selectedEditionChange:"selectedEditionChange"},features:[e.qOj],decls:3,vars:2,consts:[[1,"form-select",3,"ngModel","ngModelChange"],["EditionCombobox",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,t){1&n&&(e.TgZ(0,"select",0,1),e.NdJ("ngModelChange",function(d){return t.selectedEdition=d})("ngModelChange",function(d){return t.selectedEditionChange.emit(d)}),e.YNc(2,k,2,2,"option",2),e.qZA()),2&n&&(e.Q6J("ngModel",t.selectedEdition),e.xp6(2),e.Q6J("ngForOf",t.editions))},dependencies:[g.sg,r.YN,r.Kr,r.EJ,r.JJ,r.On],encapsulation:2})),l})();var j=c(68989),G=c(78176),O=c(24276),A=c(45513),E=c(42152),w=c(34714),y=c(24142),Z=c(3291);const K=["createModal"];function Y(a,l){1&a&&(e.TgZ(0,"span",53),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TenantName_Regex_Description")," "))}const _=function(a){return{edited:a}};function V(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"div",11)(1,"label",54),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"input",55,56),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.tenant.connectionString=t)}),e.qZA(),e._UZ(6,"validation-messages",15),e.qZA()}if(2&a){const i=e.MAs(5),n=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,4,"DatabaseConnectionString")," *"),e.xp6(2),e.Q6J("ngModel",n.tenant.connectionString)("ngClass",e.VKq(6,_,n.tenant.connectionString)),e.xp6(2),e.Q6J("formCtrl",i)}}function B(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"div",11)(1,"label",57),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"input",58,59),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.tenant.adminPassword=t)}),e.qZA()()}if(2&a){const i=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,9,"AdminPassword")),e.xp6(2),e.Q6J("ngModel",i.tenant.adminPassword)("ngClass",e.VKq(11,_,i.tenant.adminPassword))("required",!i.setRandomPassword)("requireDigit",i.passwordComplexitySetting.requireDigit)("requireLowercase",i.passwordComplexitySetting.requireLowercase)("requireUppercase",i.passwordComplexitySetting.requireUppercase)("requireNonAlphanumeric",i.passwordComplexitySetting.requireNonAlphanumeric)("requiredLength",i.passwordComplexitySetting.requiredLength)}}function $(a,l){if(1&a&&(e.TgZ(0,"ul",60)(1,"li",34),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"li",34),e._uU(5),e.ALo(6,"localize"),e.qZA(),e.TgZ(7,"li",34),e._uU(8),e.ALo(9,"localize"),e.qZA(),e.TgZ(10,"li",34),e._uU(11),e.ALo(12,"localize"),e.qZA(),e.TgZ(13,"li",34),e._uU(14),e.ALo(15,"localize"),e.qZA()()),2&a){e.oxw();const i=e.MAs(1),n=e.oxw();e.xp6(1),e.Q6J("hidden",!i.controls.adminPassword.errors.requireDigit),e.xp6(1),e.hij(" ",e.lcZ(3,10,"PasswordComplexity_RequireDigit_Hint")," "),e.xp6(2),e.Q6J("hidden",!i.controls.adminPassword.errors.requireLowercase),e.xp6(1),e.hij(" ",e.lcZ(6,12,"PasswordComplexity_RequireLowercase_Hint")," "),e.xp6(2),e.Q6J("hidden",!i.controls.adminPassword.errors.requireUppercase),e.xp6(1),e.hij(" ",e.lcZ(9,14,"PasswordComplexity_RequireUppercase_Hint")," "),e.xp6(2),e.Q6J("hidden",!i.controls.adminPassword.errors.requireNonAlphanumeric),e.xp6(1),e.hij(" ",e.lcZ(12,16,"PasswordComplexity_RequireNonAlphanumeric_Hint")," "),e.xp6(2),e.Q6J("hidden",!i.controls.adminPassword.errors.requiredLength),e.xp6(1),e.hij(" ",e.xi3(15,18,"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength)," ")}}function W(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"div",11)(1,"label",61),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"input",62,63),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.tenantAdminPasswordRepeat=t)}),e.qZA()()}if(2&a){const i=e.MAs(5),n=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,9,"AdminPasswordRepeat")),e.xp6(2),e.Q6J("ngModel",n.tenantAdminPasswordRepeat)("ngClass",e.VKq(11,_,i))("required",!n.setRandomPassword)("requireDigit",n.passwordComplexitySetting.requireDigit)("requireLowercase",n.passwordComplexitySetting.requireLowercase)("requireUppercase",n.passwordComplexitySetting.requireUppercase)("requireNonAlphanumeric",n.passwordComplexitySetting.requireNonAlphanumeric)("requiredLength",n.passwordComplexitySetting.requiredLength)}}function X(a,l){if(1&a&&(e.TgZ(0,"ul",60)(1,"li",34),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"li",34),e._uU(5),e.ALo(6,"localize"),e.qZA(),e.TgZ(7,"li",34),e._uU(8),e.ALo(9,"localize"),e.qZA(),e.TgZ(10,"li",34),e._uU(11),e.ALo(12,"localize"),e.qZA(),e.TgZ(13,"li",34),e._uU(14),e.ALo(15,"localize"),e.qZA(),e.TgZ(16,"li",34),e._uU(17),e.ALo(18,"localize"),e.qZA()()),2&a){e.oxw();const i=e.MAs(1),n=e.oxw();e.xp6(1),e.Q6J("hidden",!i.controls.adminPasswordRepeat.errors.requireDigit),e.xp6(1),e.hij(" ",e.lcZ(3,12,"PasswordComplexity_RequireDigit_Hint")," "),e.xp6(2),e.Q6J("hidden",!i.controls.adminPasswordRepeat.errors.requireLowercase),e.xp6(1),e.hij(" ",e.lcZ(6,14,"PasswordComplexity_RequireLowercase_Hint")," "),e.xp6(2),e.Q6J("hidden",!i.controls.adminPasswordRepeat.errors.requireUppercase),e.xp6(1),e.hij(" ",e.lcZ(9,16,"PasswordComplexity_RequireUppercase_Hint")," "),e.xp6(2),e.Q6J("hidden",!i.controls.adminPasswordRepeat.errors.requireNonAlphanumeric),e.xp6(1),e.hij(" ",e.lcZ(12,18,"PasswordComplexity_RequireNonAlphanumeric_Hint")," "),e.xp6(2),e.Q6J("hidden",!i.controls.adminPasswordRepeat.errors.requiredLength),e.xp6(1),e.hij(" ",e.xi3(15,20,"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength)," "),e.xp6(2),e.Q6J("hidden",i.controls.adminPasswordRepeat.valid),e.xp6(1),e.hij(" ",e.lcZ(18,23,"PasswordsDontMatch")," ")}}function ee(a,l){if(1&a&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&a){const i=l.$implicit;e.Q6J("value",i.value),e.xp6(1),e.hij(" ",i.displayText," ")}}const te=function(a){return{"has-error":a}},ne=function(){return{adaptivePosition:!0}};function ie(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"form",5,6),e.NdJ("submit",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.save())}),e.TgZ(2,"div",7)(3,"h5",8)(4,"span"),e._uU(5),e.ALo(6,"localize"),e.qZA()(),e.TgZ(7,"button",9),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.close())}),e.qZA()(),e.TgZ(8,"div",10)(9,"div",11)(10,"label",12),e._uU(11),e.ALo(12,"localize"),e.qZA(),e.TgZ(13,"input",13,14),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.tenancyName=t)}),e.qZA(),e._UZ(16,"validation-messages",15),e.qZA(),e.TgZ(17,"div"),e.YNc(18,Y,3,3,"span",16),e.qZA(),e.TgZ(19,"div",11)(20,"label",17),e._uU(21),e.ALo(22,"localize"),e.qZA(),e.TgZ(23,"input",18,19),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.name=t)}),e.qZA(),e._UZ(25,"validation-messages",15),e.qZA(),e.TgZ(26,"label",20)(27,"input",21),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.useHostDb=t)}),e.qZA(),e.TgZ(28,"span",22),e._uU(29),e.ALo(30,"localize"),e.qZA()(),e.YNc(31,V,7,8,"div",23),e.TgZ(32,"div",11)(33,"label",24),e._uU(34),e.ALo(35,"localize"),e.qZA(),e.TgZ(36,"input",25,26),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.adminName=t)}),e.qZA(),e._UZ(38,"validation-messages",15),e.qZA(),e.TgZ(39,"div",11)(40,"label",27),e._uU(41),e.ALo(42,"localize"),e.qZA(),e.TgZ(43,"input",28,29),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.adminSurname=t)}),e.qZA(),e._UZ(45,"validation-messages",15),e.qZA(),e.TgZ(46,"div",11)(47,"label",30),e._uU(48),e.ALo(49,"localize"),e.qZA(),e.TgZ(50,"input",31,32),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.adminEmailAddress=t)}),e.qZA(),e._UZ(52,"validation-messages",15),e.qZA(),e.TgZ(53,"label",20)(54,"input",33),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.setRandomPassword=t)}),e.qZA(),e.TgZ(55,"span",22),e._uU(56),e.ALo(57,"localize"),e.qZA()(),e.YNc(58,B,6,13,"div",23),e.TgZ(59,"div",34),e.YNc(60,$,16,21,"ul",35),e.qZA(),e.YNc(61,W,6,13,"div",23),e.TgZ(62,"div",34),e.YNc(63,X,19,25,"ul",35),e.qZA(),e.TgZ(64,"div",11)(65,"label",36),e._uU(66),e.ALo(67,"localize"),e.qZA(),e.TgZ(68,"select",37),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.editionId=t)})("change",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.onEditionChange())}),e.YNc(69,ee,2,2,"option",38),e.qZA()(),e.TgZ(70,"label",39)(71,"input",40),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.isUnlimited=t)})("change",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.onIsUnlimitedChange())}),e.qZA(),e.TgZ(72,"span",22),e._uU(73),e.ALo(74,"localize"),e.qZA()(),e.TgZ(75,"div",41)(76,"label",42),e._uU(77),e.ALo(78,"localize"),e.qZA(),e.TgZ(79,"input",43,44),e.NdJ("dateChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.subscriptionEndDateUtc=t)}),e.qZA()(),e.TgZ(81,"label",39)(82,"input",45),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.isInTrialPeriod=t)}),e.qZA(),e.TgZ(83,"span",22),e._uU(84),e.ALo(85,"localize"),e.qZA()(),e.TgZ(86,"label",20)(87,"input",46),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.shouldChangePasswordOnNextLogin=t)}),e.qZA(),e.TgZ(88,"span",22),e._uU(89),e.ALo(90,"localize"),e.qZA()(),e.TgZ(91,"label",20)(92,"input",47),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.sendActivationEmail=t)}),e.qZA(),e.TgZ(93,"span",22),e._uU(94),e.ALo(95,"localize"),e.qZA()(),e.TgZ(96,"label",20)(97,"input",48),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.isActive=t)}),e.qZA(),e.TgZ(98,"span",22),e._uU(99),e.ALo(100,"localize"),e.qZA()()(),e.TgZ(101,"div",49)(102,"button",50),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.close())}),e._uU(103),e.ALo(104,"localize"),e.qZA(),e.TgZ(105,"button",51),e._UZ(106,"i",52),e.TgZ(107,"span"),e._uU(108),e.ALo(109,"localize"),e.qZA()()()()}if(2&a){const i=e.MAs(1),n=e.MAs(14),t=e.MAs(15),o=e.MAs(24),d=e.MAs(37),m=e.MAs(44),S=e.MAs(51),p=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,62,"CreateNewTenant")),e.xp6(2),e.Q6J("disabled",p.saving),e.uIk("aria-label",p.l("Close")),e.xp6(4),e.hij("",e.lcZ(12,64,"TenancyName")," *"),e.xp6(2),e.Q6J("ngClass",e.VKq(96,_,p.tenant.tenancyName))("ngModel",p.tenant.tenancyName),e.xp6(3),e.Q6J("formCtrl",n),e.xp6(2),e.Q6J("ngIf",!t.valid&&!t.pristine),e.xp6(3),e.hij("",e.lcZ(22,66,"TenantName")," *"),e.xp6(2),e.Q6J("ngClass",e.VKq(98,_,p.tenant.name))("ngModel",p.tenant.name),e.xp6(2),e.Q6J("formCtrl",o),e.xp6(2),e.Q6J("ngModel",p.useHostDb),e.xp6(2),e.hij(" ",e.lcZ(30,68,"UseHostDatabase")," "),e.xp6(2),e.Q6J("ngIf",!p.useHostDb),e.xp6(3),e.hij("",e.lcZ(35,70,"AdminName")," *"),e.xp6(2),e.Q6J("ngModel",p.tenant.adminName)("ngClass",e.VKq(100,_,p.tenant.adminName)),e.xp6(2),e.Q6J("formCtrl",d),e.xp6(3),e.hij("",e.lcZ(42,72,"AdminSurname")," *"),e.xp6(2),e.Q6J("ngModel",p.tenant.adminSurname)("ngClass",e.VKq(102,_,p.tenant.adminSurname)),e.xp6(2),e.Q6J("formCtrl",m),e.xp6(3),e.hij("",e.lcZ(49,74,"AdminEmailAddress")," *"),e.xp6(2),e.Q6J("ngModel",p.tenant.adminEmailAddress)("ngClass",e.VKq(104,_,p.tenant.adminEmailAddress)),e.xp6(2),e.Q6J("formCtrl",S),e.xp6(2),e.Q6J("ngModel",p.setRandomPassword),e.xp6(2),e.hij(" ",e.lcZ(57,76,"SetRandomPassword")," "),e.xp6(2),e.Q6J("ngIf",!p.setRandomPassword),e.xp6(1),e.Q6J("hidden",i.form.valid||i.form.pristine),e.xp6(1),e.Q6J("ngIf",i.controls.adminPassword&&i.controls.adminPassword.errors),e.xp6(1),e.Q6J("ngIf",!p.setRandomPassword),e.xp6(1),e.Q6J("hidden",i.form.valid||i.form.pristine),e.xp6(1),e.Q6J("ngIf",i.controls.adminPasswordRepeat&&i.controls.adminPasswordRepeat.errors),e.xp6(3),e.Oqu(e.lcZ(67,78,"Edition")),e.xp6(2),e.Q6J("ngModel",p.tenant.editionId),e.xp6(1),e.Q6J("ngForOf",p.editions),e.xp6(1),e.Q6J("hidden",!p.isSubscriptionFieldsVisible),e.xp6(1),e.Q6J("ngModel",p.isUnlimited),e.xp6(2),e.hij(" ",e.lcZ(74,80,"UnlimitedTimeSubscription")," "),e.xp6(2),e.Q6J("hidden",p.isUnlimited||!p.isSubscriptionFieldsVisible)("ngClass",e.VKq(106,te,!p.subscriptionEndDateIsValid())),e.xp6(2),e.Oqu(e.lcZ(78,82,"SubscriptionEndDate")),e.xp6(2),e.Q6J("date",p.tenant.subscriptionEndDateUtc)("bsConfig",e.DdM(108,ne)),e.xp6(2),e.Q6J("hidden",p.isUnlimited||!p.isSubscriptionFieldsVisible),e.xp6(1),e.Q6J("ngModel",p.tenant.isInTrialPeriod)("disabled",p.isSelectedEditionFree),e.xp6(2),e.hij(" ",e.lcZ(85,84,"IsInTrialPeriod")," "),e.xp6(3),e.Q6J("ngModel",p.tenant.shouldChangePasswordOnNextLogin),e.xp6(2),e.hij(" ",e.lcZ(90,86,"ShouldChangePasswordOnNextLogin")," "),e.xp6(3),e.Q6J("ngModel",p.tenant.sendActivationEmail),e.xp6(2),e.hij(" ",e.lcZ(95,88,"SendActivationEmail")," "),e.xp6(3),e.Q6J("ngModel",p.tenant.isActive),e.xp6(2),e.hij(" ",e.lcZ(100,90,"Active")," "),e.xp6(3),e.Q6J("disabled",p.saving),e.xp6(1),e.hij(" ",e.lcZ(104,92,"Cancel")," "),e.xp6(2),e.Q6J("buttonBusy",p.saving)("busyText",p.l("SavingWithThreeDot"))("disabled",!i.form.valid||p.saving||!p.subscriptionEndDateIsValid()),e.xp6(3),e.Oqu(e.lcZ(109,94,"Save"))}}const oe=function(a){return{backdrop:"static",keyboard:a}};let ae=(()=>{var a;class l extends f.c{constructor(n,t,o,d,m){super(n),(0,s.Z)(this,"_tenantService",void 0),(0,s.Z)(this,"_commonLookupService",void 0),(0,s.Z)(this,"_profileService",void 0),(0,s.Z)(this,"_dateTimeService",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"modalSave",new e.vpe),(0,s.Z)(this,"active",!1),(0,s.Z)(this,"saving",!1),(0,s.Z)(this,"setRandomPassword",!0),(0,s.Z)(this,"useHostDb",!0),(0,s.Z)(this,"editions",[]),(0,s.Z)(this,"tenant",void 0),(0,s.Z)(this,"passwordComplexitySetting",new u.qSp),(0,s.Z)(this,"isUnlimited",!1),(0,s.Z)(this,"isSubscriptionFieldsVisible",!1),(0,s.Z)(this,"isSelectedEditionFree",!1),(0,s.Z)(this,"tenantAdminPasswordRepeat",""),this._tenantService=t,this._commonLookupService=o,this._profileService=d,this._dateTimeService=m}show(){this.active=!0,this.init(),this._profileService.getPasswordComplexitySetting().subscribe(n=>{this.passwordComplexitySetting=n.setting,this.modal.show()})}onShown(){document.getElementById("TenancyName").focus()}init(){this.tenant=new u.uNx,this.tenant.isActive=!0,this.tenant.shouldChangePasswordOnNextLogin=!0,this.tenant.sendActivationEmail=!0,this.tenant.editionId=0,this.tenant.isInTrialPeriod=!1,this._commonLookupService.getEditionsForCombobox(!1).subscribe(n=>{this.editions=n.items;let t=new u.EHF;t.value="",t.displayText=this.l("NotAssigned"),this.editions.unshift(t),this._commonLookupService.getDefaultEditionName().subscribe(o=>{let d=(0,C.Z)(this.editions,{displayText:o.name});d&&d[0]&&(this.tenant.editionId=parseInt(d[0].value),this.toggleSubscriptionFields())})})}getEditionValue(n){return parseInt(n.value)}selectedEditionIsFree(){let n=(0,C.Z)(this.editions,{value:this.tenant.editionId.toString()}).map(o=>Object.assign(new u.EHF,o));return 1!==n.length&&(this.isSelectedEditionFree=!0),this.isSelectedEditionFree=n[0].isFree,this.isSelectedEditionFree}subscriptionEndDateIsValid(){return!!(this.tenant.editionId<=0||this.isUnlimited)||!!this.tenant.subscriptionEndDateUtc&&void 0!==this.tenant.subscriptionEndDateUtc}save(){this.saving=!0,this.setRandomPassword&&(this.tenant.adminPassword=null),0===this.tenant.editionId&&(this.tenant.editionId=null),this.isUnlimited&&(this.tenant.isInTrialPeriod=!1),this.tenant.subscriptionEndDateUtc=this.isUnlimited||this.tenant.editionId<=0?null:this._dateTimeService.toUtcDate(this.tenant.subscriptionEndDateUtc),this._tenantService.createTenant(this.tenant).pipe((0,T.x)(()=>this.saving=!1)).subscribe(()=>{this.notify.info(this.l("SavedSuccessfully")),this.close(),this.modalSave.emit(null)})}close(){this.active=!1,this.tenantAdminPasswordRepeat="",this.modal.hide()}onEditionChange(){this.tenant.isInTrialPeriod=this.tenant.editionId>0&&!this.selectedEditionIsFree(),this.toggleSubscriptionFields()}toggleSubscriptionFields(){this.isSelectedEditionFree=this.selectedEditionIsFree(),this.tenant.editionId<=0||this.isSelectedEditionFree?(this.isSubscriptionFieldsVisible=!1,this.isUnlimited=!!this.isSelectedEditionFree):this.isSubscriptionFieldsVisible=!0}onIsUnlimitedChange(){this.isUnlimited&&(this.tenant.isInTrialPeriod=!1)}}return a=l,(0,s.Z)(l,"\u0275fac",function(n){return new(n||a)(e.Y36(e.zs3),e.Y36(u.ANv),e.Y36(u.P0Z),e.Y36(u.qAB),e.Y36(v.C))}),(0,s.Z)(l,"\u0275cmp",e.Xpm({type:a,selectors:[["createTenantModal"]],viewQuery:function(n,t){if(1&n&&e.Gf(K,7),2&n){let o;e.iGM(o=e.CRH())&&(t.modal=o.first)}},outputs:{modalSave:"modalSave"},features:[e.qOj],decls:5,vars:4,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","createModal","aria-hidden","true",1,"modal","fade",3,"config","onShown"],["createModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],["role","form","novalidate","","class","form-validation",3,"submit",4,"ngIf"],["role","form","novalidate","",1,"form-validation",3,"submit"],["tenantCreateForm","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"disabled","click"],[1,"modal-body"],[1,"mb-5"],["for","TenancyName"],["id","TenancyName","type","text","name","tenancyName","required","","maxlength","64","pattern","^[a-zA-Z][a-zA-Z0-9_-]{1,}$",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["tenancyNameInput","ngModel","tenancyName","ngModel"],[3,"formCtrl"],["class","form-control-feedback",4,"ngIf"],["for","Name"],["id","Name","type","text","name","Name","required","","maxlength","128",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["nameInput","ngModel"],[1,"form-check","form-check-custom","form-check-solid","py-1"],["id","CreateTenant_UseHostDb","type","checkbox","name","UseHostDb",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["class","mb-5",4,"ngIf"],["for","AdminName"],["id","AdminName","type","text","name","AdminName","required","","maxlength","64",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["adminNameInput","ngModel"],["for","AdminSurname"],["id","AdminSurname","type","text","name","AdminSurname","required","","maxlength","64",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["adminSurnameInput","ngModel"],["for","AdminEmailAddress"],["id","AdminEmailAddress","type","email","name","AdminEmailAddress","required","","pattern","^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$","maxlength","256",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["adminEmailAddressInput","ngModel"],["id","CreateTenant_SetRandomPassword","type","checkbox","name","SetRandomPassword",1,"form-check-input",3,"ngModel","ngModelChange"],[3,"hidden"],["class","help-block text-danger",4,"ngIf"],["for","edition"],["id","edition","name","edition",1,"form-select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"form-check","form-check-custom","form-check-solid","py-1",3,"hidden"],["id","CreateTenant_IsUnlimited","type","checkbox","name","IsUnlimited",1,"form-check-input",3,"ngModel","ngModelChange","change"],[1,"mb-5",3,"hidden","ngClass"],["for","SubscriptionEndDate"],["id","SubscriptionEndDate","type","text","name","SubscriptionEndDateUtc","bsDatepicker","","datePickerLuxonModifier","","autocomplete","new-password",1,"form-control",3,"date","bsConfig","dateChange"],["SubscriptionEndDateUtc",""],["id","CreateTenant_IsInTrialPeriod","type","checkbox","name","IsInTrialPeriod",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["id","CreateTenant_ShouldChangePasswordOnNextLogin","type","checkbox","name","ShouldChangePasswordOnNextLogin",1,"form-check-input",3,"ngModel","ngModelChange"],["id","CreateTenant_SendActivationEmail","type","checkbox","name","SendActivationEmail",1,"form-check-input",3,"ngModel","ngModelChange"],["id","CreateTenant_IsActive","type","checkbox","name","IsActive",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","fw-bold",3,"disabled","click"],["type","submit",1,"btn","btn-primary","fw-bold",3,"buttonBusy","busyText","disabled"],[1,"fa","fa-save"],[1,"form-control-feedback"],["for","DatabaseConnectionString"],["id","DatabaseConnectionString","type","text","name","ConnectionString","required","","maxlength","1024",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["connectionStringInput","ngModel"],["for","AdminPassword"],["id","AdminPassword","type","password","name","adminPassword","id","adminPassword","validateEqual","adminPasswordRepeat","reverse","true","maxlength","32",1,"form-control",3,"ngModel","ngClass","required","requireDigit","requireLowercase","requireUppercase","requireNonAlphanumeric","requiredLength","ngModelChange"],["adminPassword","ngModel"],[1,"help-block","text-danger"],["for","AdminPasswordRepeat"],["id","AdminPasswordRepeat","type","password","name","adminPasswordRepeat","validateEqual","adminPassword","maxlength","32",1,"form-control",3,"ngModel","ngClass","required","requireDigit","requireLowercase","requireUppercase","requireNonAlphanumeric","requiredLength","ngModelChange"],["adminPasswordRepeat","ngModel"],[3,"value"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0,1),e.NdJ("onShown",function(){return t.onShown()}),e.TgZ(2,"div",2)(3,"div",3),e.YNc(4,ie,110,109,"form",4),e.qZA()()()),2&n&&(e.Q6J("config",e.VKq(2,oe,!t.saving)),e.xp6(4),e.Q6J("ngIf",t.active))},dependencies:[g.mk,g.sg,g.O5,r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.EJ,r.JJ,r.JL,r.Q7,r.nD,r.c5,r.On,r.F,h.Np,h.Y5,G.z,O.J,A.L,E.s,w.s,y.Z,Z.F],encapsulation:2})),l})();const se=["nameInput"],le=["editModal"],re=["SubscriptionEndDateUtc"];function de(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"div",11)(1,"label",35),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"input",36,37),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw(2);return e.KtG(o.tenant.connectionString=t)}),e.qZA(),e._UZ(6,"validation-messages",15),e.qZA()}if(2&a){const i=e.MAs(5),n=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,3,"DatabaseConnectionString")," *"),e.xp6(2),e.Q6J("ngModel",n.tenant.connectionString),e.xp6(2),e.Q6J("formCtrl",i)}}function ce(a,l){1&a&&(e.TgZ(0,"div")(1,"span",38),e._uU(2),e.ALo(3,"localize"),e.qZA()()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"TenantDatabaseConnectionStringChangeWarningMessage")," "))}function pe(a,l){if(1&a&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&a){const i=l.$implicit;e.Q6J("value",i.value),e.xp6(1),e.hij(" ",i.displayText," ")}}const ue=function(a){return{edited:a}},me=function(a){return{"has-error":a}},ge=function(){return{adaptivePosition:!0}};function _e(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"form",5,6),e.NdJ("submit",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.save())}),e.TgZ(2,"div",7)(3,"h5",8)(4,"span"),e._uU(5),e.ALo(6,"localize"),e.qZA()(),e.TgZ(7,"button",9),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.close())}),e.qZA()(),e.TgZ(8,"div",10)(9,"div",11)(10,"label",12),e._uU(11),e.ALo(12,"localize"),e.qZA(),e.TgZ(13,"input",13,14),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.name=t)}),e.qZA(),e._UZ(15,"validation-messages",15),e.qZA(),e.YNc(16,de,7,5,"div",16),e.YNc(17,ce,4,3,"div",17),e.TgZ(18,"div",11)(19,"label",18),e._uU(20),e.ALo(21,"localize"),e.qZA(),e.TgZ(22,"select",19),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.editionId=t)})("change",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.onEditionChange())}),e.YNc(23,pe,2,2,"option",20),e.qZA()(),e.TgZ(24,"label",21)(25,"input",22),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.isUnlimited=t)})("ngModelChange",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.onUnlimitedChange())}),e.qZA(),e.TgZ(26,"span",23),e._uU(27),e.ALo(28,"localize"),e.qZA()(),e.TgZ(29,"div",24)(30,"label",25),e._uU(31),e.ALo(32,"localize"),e.qZA(),e.TgZ(33,"input",26,27),e.NdJ("dateChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.subscriptionEndDateChange(t))})("dateChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.subscriptionEndDateUtc=t)}),e.qZA()(),e.TgZ(35,"label",21)(36,"input",28),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.isInTrialPeriod=t)}),e.qZA(),e.TgZ(37,"span",23),e._uU(38),e.ALo(39,"localize"),e.qZA()(),e.TgZ(40,"label",29)(41,"input",30),e.NdJ("ngModelChange",function(t){e.CHM(i);const o=e.oxw();return e.KtG(o.tenant.isActive=t)}),e.qZA(),e.TgZ(42,"span",23),e._uU(43),e.ALo(44,"localize"),e.qZA()()(),e.TgZ(45,"div",31)(46,"button",32),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.close())}),e._uU(47),e.ALo(48,"localize"),e.qZA(),e.TgZ(49,"button",33),e._UZ(50,"i",34),e.TgZ(51,"span"),e._uU(52),e.ALo(53,"localize"),e.qZA()()()()}if(2&a){const i=e.MAs(1),n=e.MAs(14),t=e.oxw();e.xp6(5),e.AsE("",e.lcZ(6,35,"EditTenant"),": ",t.tenant.tenancyName,""),e.xp6(2),e.Q6J("disabled",t.saving),e.uIk("aria-label",t.l("Close")),e.xp6(4),e.hij("",e.lcZ(12,37,"TenantName")," *"),e.xp6(2),e.Q6J("ngClass",e.VKq(53,ue,t.tenant.name))("ngModel",t.tenant.name),e.xp6(2),e.Q6J("formCtrl",n),e.xp6(1),e.Q6J("ngIf",t.currentConnectionString),e.xp6(1),e.Q6J("ngIf",t.currentConnectionString),e.xp6(3),e.Oqu(e.lcZ(21,39,"Edition")),e.xp6(2),e.Q6J("ngModel",t.tenant.editionId),e.xp6(1),e.Q6J("ngForOf",t.editions),e.xp6(1),e.Q6J("hidden",!t.isSubscriptionFieldsVisible),e.xp6(1),e.Q6J("ngModel",t.isUnlimited),e.xp6(2),e.hij(" ",e.lcZ(28,41,"UnlimitedTimeSubscription")," "),e.xp6(2),e.Q6J("hidden",t.isUnlimited||!t.isSubscriptionFieldsVisible)("ngClass",e.VKq(55,me,!t.subscriptionEndDateUtcIsValid)),e.xp6(2),e.Oqu(e.lcZ(32,43,"SubscriptionEndDateUtc")),e.xp6(2),e.Q6J("date",t.tenant.subscriptionEndDateUtc)("isUtc",!0)("bsConfig",e.DdM(57,ge))("required",!t.isUnlimited),e.xp6(2),e.Q6J("hidden",t.isUnlimited||!t.isSubscriptionFieldsVisible),e.xp6(1),e.Q6J("disabled",t.selectedEditionIsFree())("ngModel",t.tenant.isInTrialPeriod),e.xp6(2),e.hij(" ",e.lcZ(39,45,"IsInTrialPeriod")," "),e.xp6(3),e.Q6J("ngModel",t.tenant.isActive),e.xp6(2),e.hij(" ",e.lcZ(44,47,"Active")," "),e.xp6(3),e.Q6J("disabled",t.saving),e.xp6(1),e.hij(" ",e.lcZ(48,49,"Cancel")," "),e.xp6(2),e.Q6J("buttonBusy",t.saving)("busyText",t.l("SavingWithThreeDot"))("disabled",!i.form.valid||t.saving||!t.subscriptionEndDateUtcIsValid),e.xp6(3),e.Oqu(e.lcZ(53,51,"Save"))}}const he=function(a){return{backdrop:"static",keyboard:a}};let fe=(()=>{var a;class l extends f.c{constructor(n,t,o,d){super(n),(0,s.Z)(this,"_tenantService",void 0),(0,s.Z)(this,"_commonLookupService",void 0),(0,s.Z)(this,"_dateTimeService",void 0),(0,s.Z)(this,"nameInput",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"subscriptionEndDateUtc",void 0),(0,s.Z)(this,"modalSave",new e.vpe),(0,s.Z)(this,"active",!1),(0,s.Z)(this,"saving",!1),(0,s.Z)(this,"isUnlimited",!1),(0,s.Z)(this,"subscriptionEndDateUtcIsValid",!1),(0,s.Z)(this,"tenant",void 0),(0,s.Z)(this,"currentConnectionString",void 0),(0,s.Z)(this,"editions",[]),(0,s.Z)(this,"isSubscriptionFieldsVisible",!1),this._tenantService=t,this._commonLookupService=o,this._dateTimeService=d}show(n){this.active=!0,this._commonLookupService.getEditionsForCombobox(!1).subscribe(t=>{this.editions=t.items;let o=new u.EHF;o.displayText=this.l("NotAssigned"),o.value="",this.editions.unshift(o),this._tenantService.getTenantForEdit(n).subscribe(d=>{this.tenant=d,this.currentConnectionString=d.connectionString,this.tenant.editionId=this.tenant.editionId||0,this.isUnlimited=!this.tenant.subscriptionEndDateUtc,this.subscriptionEndDateUtcIsValid=this.isUnlimited||void 0!==this.tenant.subscriptionEndDateUtc,this.modal.show(),this.toggleSubscriptionFields()})})}onShown(){document.getElementById("Name").focus()}subscriptionEndDateChange(n){this.subscriptionEndDateUtcIsValid=n&&!1!==n.date||this.isUnlimited}selectedEditionIsFree(){if(!this.tenant.editionId)return!0;let n=(0,C.Z)(this.editions,{value:this.tenant.editionId+""});return 1!==n.length||n[0].isFree}save(){this.saving=!0,0===this.tenant.editionId&&(this.tenant.editionId=null),this.isUnlimited&&(this.tenant.isInTrialPeriod=!1),this.tenant.subscriptionEndDateUtc=this.isUnlimited||!this.tenant.editionId?null:this.tenant.subscriptionEndDateUtc.toLocal(),this._tenantService.updateTenant(this.tenant).pipe((0,T.x)(()=>this.saving=!1)).subscribe(()=>{this.notify.info(this.l("SavedSuccessfully")),this.close(),this.modalSave.emit(null)})}close(){this.active=!1,this.modal.hide()}onEditionChange(){this.selectedEditionIsFree()&&(this.tenant.isInTrialPeriod=!1),this.toggleSubscriptionFields()}onUnlimitedChange(){this.isUnlimited?(this.tenant.subscriptionEndDateUtc=null,this.subscriptionEndDateUtcIsValid=!0,this.tenant.isInTrialPeriod=!1):this.tenant.subscriptionEndDateUtc||(this.subscriptionEndDateUtcIsValid=!1)}toggleSubscriptionFields(){this.isSubscriptionFieldsVisible=this.tenant.editionId>0}}return a=l,(0,s.Z)(l,"\u0275fac",function(n){return new(n||a)(e.Y36(e.zs3),e.Y36(u.ANv),e.Y36(u.P0Z),e.Y36(v.C))}),(0,s.Z)(l,"\u0275cmp",e.Xpm({type:a,selectors:[["editTenantModal"]],viewQuery:function(n,t){if(1&n&&(e.Gf(se,7),e.Gf(le,7),e.Gf(re,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.nameInput=o.first),e.iGM(o=e.CRH())&&(t.modal=o.first),e.iGM(o=e.CRH())&&(t.subscriptionEndDateUtc=o.first)}},outputs:{modalSave:"modalSave"},features:[e.qOj],decls:5,vars:4,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","editModal","aria-hidden","true",1,"modal","fade",3,"config","onShown"],["editModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],["role","form","novalidate","","class","form-validation",3,"submit",4,"ngIf"],["role","form","novalidate","",1,"form-validation",3,"submit"],["tenantEditForm","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"disabled","click"],[1,"modal-body"],[1,"mb-5"],["for","Name"],["id","Name","type","text","name","Name","required","","maxlength","128",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["nameInput","ngModel"],[3,"formCtrl"],["class","mb-5",4,"ngIf"],[4,"ngIf"],["for","edition"],["id","edition","name","edition",1,"form-select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"form-check","form-check-custom","form-check-solid","py-1",3,"hidden"],["id","CreateTenant_IsUnlimited","type","checkbox","name","IsUnlimited",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"mb-5",3,"hidden","ngClass"],["for","SubscriptionEndDateUtc"],["id","SubscriptionEndDateUtc","type","datetime","name","SubscriptionEndDateUtc","bsDatepicker","","datePickerLuxonModifier","",1,"form-control",3,"date","isUtc","bsConfig","required","dateChange"],["SubscriptionEndDateUtc",""],["id","CreateTenant_IsInTrialPeriod","type","checkbox","name","IsInTrialPeriod",1,"form-check-input",3,"disabled","ngModel","ngModelChange"],[1,"form-check","form-check-custom","form-check-solid","py-1"],["id","EditTenant_IsActive","type","checkbox","name","IsActive",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","fw-bold",3,"disabled","click"],["type","submit",1,"btn","btn-primary","fw-bold",3,"buttonBusy","busyText","disabled"],[1,"fa","fa-save"],["for","DatabaseConnectionString"],["id","DatabaseConnectionString","type","text","name","ConnectionString","required","","maxlength","1024",1,"form-control",3,"ngModel","ngModelChange"],["connectionStringInput","ngModel"],[1,"help-block","text-warning"],[3,"value"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0,1),e.NdJ("onShown",function(){return t.onShown()}),e.TgZ(2,"div",2)(3,"div",3),e.YNc(4,_e,54,58,"form",4),e.qZA()()()),2&n&&(e.Q6J("config",e.VKq(2,he,!t.saving)),e.xp6(4),e.Q6J("ngIf",t.tenant&&t.active))},dependencies:[g.mk,g.sg,g.O5,r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.EJ,r.JJ,r.JL,r.Q7,r.nD,r.On,r.F,h.Np,h.Y5,A.L,E.s,w.s,y.Z,Z.F],encapsulation:2})),l})();var Te=c(39387),Ce=c(79917);const Ze=["tenantFeaturesModal"],be=["featureTree"];function ve(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"form",5,6),e.NdJ("submit",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.save())}),e.TgZ(2,"div",7)(3,"h4",8)(4,"span"),e._uU(5),e.ALo(6,"localize"),e.qZA()(),e.TgZ(7,"button",9),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.close())}),e.qZA()(),e.TgZ(8,"div",10),e._UZ(9,"feature-tree",null,11),e.qZA(),e.TgZ(11,"div",12)(12,"button",13),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.resetFeatures())}),e.ALo(13,"localize"),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"localize"),e.qZA()(),e.TgZ(17,"button",14),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.close())}),e._uU(18),e.ALo(19,"localize"),e.qZA(),e.TgZ(20,"button",15),e._UZ(21,"i",16),e.TgZ(22,"span"),e._uU(23),e.ALo(24,"localize"),e.qZA()()()()}if(2&a){const i=e.oxw();e.xp6(5),e.AsE("",e.lcZ(6,13,"Features")," - ",i.tenantName,""),e.xp6(7),e.s9C("tooltip",e.lcZ(13,15,"ResetFeaturesTooltip")),e.Q6J("disabled",i.saving)("buttonBusy",i.resettingFeatures)("busyText",i.l("SavingWithThreeDot")),e.xp6(3),e.Oqu(e.lcZ(16,17,"ResetSpecialFeatures")),e.xp6(2),e.Q6J("disabled",i.saving||i.resettingFeatures),e.xp6(1),e.hij(" ",e.lcZ(19,19,"Cancel")," "),e.xp6(2),e.Q6J("disabled",i.resettingFeatures)("buttonBusy",i.saving)("busyText",i.l("SavingWithThreeDot")),e.xp6(3),e.Oqu(e.lcZ(24,21,"Save"))}}const xe=function(){return{backdrop:"static"}};let Me=(()=>{var a;class l extends f.c{constructor(n,t){super(n),(0,s.Z)(this,"_tenantService",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"featureTree",void 0),(0,s.Z)(this,"active",!1),(0,s.Z)(this,"saving",!1),(0,s.Z)(this,"resettingFeatures",!1),(0,s.Z)(this,"tenantId",void 0),(0,s.Z)(this,"tenantName",void 0),(0,s.Z)(this,"featureEditData",null),this._tenantService=t}show(n,t){this.tenantId=n,this.tenantName=t,this.active=!0,this.loadFeatures(),this.modal.show()}loadFeatures(){const n=this;n._tenantService.getTenantFeaturesForEdit(this.tenantId).subscribe(t=>{n.featureTree.editData=t})}save(){if(!this.featureTree.areAllValuesValid())return void this.message.warn(this.l("InvalidFeaturesWarning"));const n=new u.Qxy;n.id=this.tenantId,n.featureValues=this.featureTree.getGrantedFeatures(),this.saving=!0,this._tenantService.updateTenantFeatures(n).pipe((0,T.x)(()=>this.saving=!1)).subscribe(()=>{this.notify.info(this.l("SavedSuccessfully")),this.close()})}resetFeatures(){const n=new u.KAE;n.id=this.tenantId,this.resettingFeatures=!0,this._tenantService.resetTenantSpecificFeatures(n).pipe((0,T.x)(()=>this.resettingFeatures=!1)).subscribe(()=>{this.notify.info(this.l("ResetSuccessfully")),this.loadFeatures()})}close(){this.active=!1,this.modal.hide()}}return a=l,(0,s.Z)(l,"\u0275fac",function(n){return new(n||a)(e.Y36(e.zs3),e.Y36(u.ANv))}),(0,s.Z)(l,"\u0275cmp",e.Xpm({type:a,selectors:[["tenantFeaturesModal"]],viewQuery:function(n,t){if(1&n&&(e.Gf(Ze,7),e.Gf(be,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.modal=o.first),e.iGM(o=e.CRH())&&(t.featureTree=o.first)}},features:[e.qOj],decls:5,vars:3,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","tenantFeaturesModal","aria-hidden","true",1,"modal","fade",3,"config"],["tenantFeaturesModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],["name","editTenantFeaturesForm","role","form","novalidate","","class","form-validation",3,"submit",4,"ngIf"],["name","editTenantFeaturesForm","role","form","novalidate","",1,"form-validation",3,"submit"],["editTenantFeaturesForm","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-hidden","true",1,"btn-close",3,"click"],[1,"modal-body"],["featureTree",""],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","fw-bold","pull-left",3,"disabled","buttonBusy","busyText","tooltip","click"],["type","button",1,"btn","btn-light-primary","fw-bold",3,"disabled","click"],["type","submit",1,"btn","btn-primary","fw-bold",3,"disabled","buttonBusy","busyText"],[1,"fa","fa-save"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3),e.YNc(4,ve,25,23,"form",4),e.qZA()()()),2&n&&(e.Q6J("config",e.DdM(2,xe)),e.xp6(4),e.Q6J("ngIf",t.active))},dependencies:[g.O5,r._Y,r.JL,r.F,A.L,y.Z,Te.y,Ce.i9,Z.F],encapsulation:2})),l})();var Ae=c(88922),ye=c(83410);const Se=["impersonateUserLookupModal"],qe=["createTenantModal"],Ee=["editTenantModal"],we=["tenantFeaturesModal"],Ue=["dataTable"],Je=["paginator"],Ie=["entityTypeHistoryModal"];function De(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.createTenant())}),e._UZ(1,"i",47),e.TgZ(2,"span",28),e._uU(3),e.ALo(4,"localize"),e.qZA()()}2&a&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"CreateNewTenant")," "))}function Ne(a,l){1&a&&(e.TgZ(0,"tr")(1,"th",48),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"th",49),e._uU(5),e.ALo(6,"localize"),e._UZ(7,"p-sortIcon",50),e.qZA(),e.TgZ(8,"th",51),e._uU(9),e.ALo(10,"localize"),e._UZ(11,"p-sortIcon",52),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"localize"),e.qZA(),e.TgZ(15,"th",53),e._uU(16),e.ALo(17,"localize"),e._UZ(18,"p-sortIcon",54),e.qZA(),e.TgZ(19,"th",55),e._uU(20),e.ALo(21,"localize"),e._UZ(22,"p-sortIcon",56),e.qZA(),e.TgZ(23,"th",57),e._uU(24),e.ALo(25,"localize"),e._UZ(26,"p-sortIcon",58),e.qZA()()),2&a&&(e.xp6(2),e.Oqu(e.lcZ(3,7,"Actions")),e.xp6(3),e.hij(" ",e.lcZ(6,9,"TenancyCodeName")," "),e.xp6(4),e.hij(" ",e.lcZ(10,11,"TenantName")," "),e.xp6(4),e.Oqu(e.lcZ(14,13,"Edition")),e.xp6(3),e.hij(" ",e.lcZ(17,15,"SubscriptionEndDateUtc")," "),e.xp6(4),e.hij(" ",e.lcZ(21,17,"Active")," "),e.xp6(4),e.hij(" ",e.lcZ(25,19,"CreationTime")," "))}function Le(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"li",71)(1,"a",72),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2).$implicit,o=e.oxw();return e.KtG(t.isActive&&o.showUserImpersonateLookUpModal(t))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}if(2&a){const i=e.oxw(2).$implicit;e.ekj("disabled",!i.isActive),e.xp6(1),e.ekj("disabled",!i.isActive),e.xp6(1),e.hij(" ",e.lcZ(3,5,"LoginAsThisTenant")," ")}}function Fe(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"li",71)(1,"a",72),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2).$implicit;e.oxw();const o=e.MAs(66);return e.KtG(o.show(t.id))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Edit")," "))}function Re(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"li",71)(1,"a",72),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2).$implicit;e.oxw();const o=e.MAs(68);return e.KtG(o.show(t.id,t.name))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Features")," "))}function Pe(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"li",71)(1,"a",72),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2).$implicit,o=e.oxw();return e.KtG(o.deleteTenant(t))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Delete")," "))}function He(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"li",71)(1,"a",72),e.NdJ("click",function(){e.CHM(i);const t=e.oxw(2).$implicit,o=e.oxw();return e.KtG(o.showHistory(t))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"History")," "))}function Qe(a,l){if(1&a){const i=e.EpF();e.TgZ(0,"ul",68),e.YNc(1,Le,4,7,"li",69),e.ALo(2,"permission"),e.YNc(3,Fe,4,3,"li",70),e.ALo(4,"permission"),e.YNc(5,Re,4,3,"li",70),e.ALo(6,"permission"),e.YNc(7,Pe,4,3,"li",70),e.ALo(8,"permission"),e.TgZ(9,"li",71)(10,"a",72),e.NdJ("click",function(){e.CHM(i);const t=e.oxw().$implicit,o=e.oxw();return e.KtG(o.unlockUser(t))}),e._uU(11),e.ALo(12,"localize"),e.qZA()(),e.YNc(13,He,4,3,"li",70),e.qZA()}if(2&a){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,6,"Pages.Tenants.Impersonation")),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,8,"Pages.Tenants.Edit")),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,10,"Pages.Tenants.ChangeFeatures")),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,12,"Pages.Tenants.Delete")),e.xp6(4),e.hij(" ",e.lcZ(12,14,"Unlock")," "),e.xp6(2),e.Q6J("ngIf",i.entityHistoryEnabled)}}function ke(a,l){1&a&&(e._UZ(0,"i",73),e.ALo(1,"localize")),2&a&&e.s9C("title",e.lcZ(1,1,"HasOwnDatabase"))}function ze(a,l){1&a&&(e.TgZ(0,"span",74),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Yes")," "))}function je(a,l){1&a&&(e.TgZ(0,"span",75),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"No")," "))}function Ge(a,l){if(1&a&&(e.TgZ(0,"tr")(1,"td",48)(2,"div",59)(3,"button",60),e._UZ(4,"i",61)(5,"span",62),e._uU(6),e.ALo(7,"localize"),e.qZA(),e.YNc(8,Qe,14,16,"ul",63),e.qZA()(),e.TgZ(9,"td")(10,"span",64),e._uU(11),e.ALo(12,"localize"),e.qZA(),e.YNc(13,ke,2,3,"i",65),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"span",64),e._uU(17),e.ALo(18,"localize"),e.qZA(),e._uU(19),e.qZA(),e.TgZ(20,"td")(21,"span",64),e._uU(22),e.ALo(23,"localize"),e.qZA(),e._uU(24),e.qZA(),e.TgZ(25,"td")(26,"span",64),e._uU(27),e.ALo(28,"localize"),e.qZA(),e._uU(29),e.ALo(30,"luxonFormat"),e.qZA(),e.TgZ(31,"td")(32,"span",64),e._uU(33),e.ALo(34,"localize"),e.qZA(),e.YNc(35,ze,3,3,"span",66),e.YNc(36,je,3,3,"span",67),e.qZA(),e.TgZ(37,"td")(38,"span",64),e._uU(39),e.ALo(40,"localize"),e.qZA(),e._uU(41),e.ALo(42,"luxonFormat"),e.qZA()()),2&a){const i=l.$implicit;e.xp6(6),e.hij(" ",e.lcZ(7,15,"Actions")," "),e.xp6(5),e.Oqu(e.lcZ(12,17,"TenancyCodeName")),e.xp6(2),e.Q6J("ngIf",i.connectionString),e.xp6(1),e.hij(" ",i.tenancyName," "),e.xp6(3),e.Oqu(e.lcZ(18,19,"Name")),e.xp6(2),e.hij(" ",i.name," "),e.xp6(3),e.Oqu(e.lcZ(23,21,"Edition")),e.xp6(2),e.hij(" ",i.editionDisplayName," "),e.xp6(3),e.hij(" ",e.lcZ(28,23,"SubscriptionEndDateUtc")," "),e.xp6(2),e.hij(" ",i.subscriptionEndDateUtc?e.xi3(30,25,i.subscriptionEndDateUtc,"F"):"-"," "),e.xp6(4),e.Oqu(e.lcZ(34,28,"Active")),e.xp6(2),e.Q6J("ngIf",i.isActive),e.xp6(1),e.Q6J("ngIf",!i.isActive),e.xp6(3),e.Oqu(e.lcZ(40,30,"CreationTime")),e.xp6(2),e.hij(" ",e.xi3(42,32,i.creationTime,"F")," ")}}function Oe(a,l){1&a&&(e.TgZ(0,"div",76),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NoData")," "))}const Ke=function(){return{"min-width":"50rem"}},Ye=[{path:"",component:(()=>{var a;class l extends f.c{constructor(n,t,o,d,m,S){super(n),(0,s.Z)(this,"_tenantService",void 0),(0,s.Z)(this,"_activatedRoute",void 0),(0,s.Z)(this,"_commonLookupService",void 0),(0,s.Z)(this,"_impersonationService",void 0),(0,s.Z)(this,"_dateTimeService",void 0),(0,s.Z)(this,"impersonateUserLookupModal",void 0),(0,s.Z)(this,"createTenantModal",void 0),(0,s.Z)(this,"editTenantModal",void 0),(0,s.Z)(this,"tenantFeaturesModal",void 0),(0,s.Z)(this,"dataTable",void 0),(0,s.Z)(this,"paginator",void 0),(0,s.Z)(this,"entityTypeHistoryModal",void 0),(0,s.Z)(this,"subscriptionDateRange",void 0),(0,s.Z)(this,"creationDateRange",void 0),(0,s.Z)(this,"_entityTypeFullName","TR.CompanyQuote.MultiTenancy.Tenant"),(0,s.Z)(this,"entityHistoryEnabled",!1),(0,s.Z)(this,"filters",{}),this._tenantService=t,this._activatedRoute=o,this._commonLookupService=d,this._impersonationService=m,this._dateTimeService=S,this.subscriptionDateRange=[this._dateTimeService.getStartOfDay(),this._dateTimeService.getEndOfDayPlusDays(30)],this.creationDateRange=[this._dateTimeService.getStartOfDay(),this._dateTimeService.getEndOfDay()],this.setFiltersFromRoute()}setFiltersFromRoute(){null!=this._activatedRoute.snapshot.queryParams.subscriptionEndDateStart?(this.filters.subscriptionEndDateRangeActive=!0,this.subscriptionDateRange[0]=this._dateTimeService.fromISODateString(this._activatedRoute.snapshot.queryParams.subscriptionEndDateStart)):this.subscriptionDateRange[0]=this._dateTimeService.getStartOfDay(),null!=this._activatedRoute.snapshot.queryParams.subscriptionEndDateEnd?(this.filters.subscriptionEndDateRangeActive=!0,this.subscriptionDateRange[1]=this._dateTimeService.fromISODateString(this._activatedRoute.snapshot.queryParams.subscriptionEndDateEnd)):this.subscriptionDateRange[1]=this._dateTimeService.getEndOfDayPlusDays(30),null!=this._activatedRoute.snapshot.queryParams.creationDateStart?(this.filters.creationDateRangeActive=!0,this.creationDateRange[0]=this._dateTimeService.fromISODateString(this._activatedRoute.snapshot.queryParams.creationDateStart)):this.creationDateRange[0]=this._dateTimeService.getEndOfDayMinusDays(7),null!=this._activatedRoute.snapshot.queryParams.creationDateEnd?(this.filters.creationDateRangeActive=!0,this.creationDateRange[1]=this._dateTimeService.fromISODateString(this._activatedRoute.snapshot.queryParams.creationDateEnd)):this.creationDateRange[1]=this._dateTimeService.getEndOfDay(),null!=this._activatedRoute.snapshot.queryParams.editionId&&(this.filters.selectedEditionId=parseInt(this._activatedRoute.snapshot.queryParams.editionId))}ngOnInit(){this.filters.filterText=this._activatedRoute.snapshot.queryParams.filterText||"",this.setIsEntityHistoryEnabled(),this.impersonateUserLookupModal.configure({title:this.l("SelectAUser"),dataSource:(n,t,o,d)=>{let m=new u.MD_;return m.filter=o,m.maxResultCount=t,m.skipCount=n,m.tenantId=d,this._commonLookupService.findUsers(m)}})}getTenants(n){this.primengTableHelper.shouldResetPaging(n)&&(this.paginator.changePage(0),this.primengTableHelper.records&&this.primengTableHelper.records.length>0)||(this.primengTableHelper.showLoadingIndicator(),this._tenantService.getTenants(this.filters.filterText,this.filters.subscriptionEndDateRangeActive?this.subscriptionDateRange[0]:void 0,this.filters.subscriptionEndDateRangeActive?this.subscriptionDateRange[1].endOf("day"):void 0,this.filters.creationDateRangeActive?this.creationDateRange[0]:void 0,this.filters.creationDateRangeActive?this.creationDateRange[1].endOf("day"):void 0,this.filters.selectedEditionId,void 0!==this.filters.selectedEditionId&&this.filters.selectedEditionId+""!="-1",this.primengTableHelper.getSorting(this.dataTable),this.primengTableHelper.getMaxResultCount(this.paginator,n),this.primengTableHelper.getSkipCount(this.paginator,n)).pipe((0,T.x)(()=>this.primengTableHelper.hideLoadingIndicator())).subscribe(t=>{this.primengTableHelper.totalRecordsCount=t.totalCount,this.primengTableHelper.records=t.items,this.primengTableHelper.hideLoadingIndicator()}))}showUserImpersonateLookUpModal(n){abp.multiTenancy.getTenantIdCookie()?this.message.warn(this.l("YouAreNotLoggedInAsAHostUser")).then(()=>{document.location.reload()}):(this.impersonateUserLookupModal.tenantId=n.id,this.impersonateUserLookupModal.show())}unlockUser(n){this._tenantService.unlockTenantAdmin(new u.QJI({id:n.id})).subscribe(()=>{this.notify.success(this.l("UnlockedTenandAdmin",n.name))})}reloadPage(){this.paginator.changePage(this.paginator.getPage())}createTenant(){this.createTenantModal.show()}deleteTenant(n){this.message.confirm(this.l("TenantDeleteWarningMessage",n.tenancyName),this.l("AreYouSure"),t=>{t&&this._tenantService.deleteTenant(n.id).subscribe(()=>{this.reloadPage(),this.notify.success(this.l("SuccessfullyDeleted"))})})}showHistory(n){this.entityTypeHistoryModal.show({entityId:n.id.toString(),entityTypeFullName:this._entityTypeFullName,entityTypeDescription:n.tenancyName})}impersonateUser(n){this._impersonationService.impersonateTenant(parseInt(n.value),this.impersonateUserLookupModal.tenantId)}setIsEntityHistoryEnabled(){let n=abp.custom;this.entityHistoryEnabled=n.EntityHistory&&n.EntityHistory.isEnabled&&1===(0,C.Z)(n.EntityHistory.enabledEntities,t=>t===this._entityTypeFullName).length}}return a=l,(0,s.Z)(l,"\u0275fac",function(n){return new(n||a)(e.Y36(e.zs3),e.Y36(u.ANv),e.Y36(b.gz),e.Y36(u.P0Z),e.Y36(D.h),e.Y36(v.C))}),(0,s.Z)(l,"\u0275cmp",e.Xpm({type:a,selectors:[["ng-component"]],viewQuery:function(n,t){if(1&n&&(e.Gf(Se,7),e.Gf(qe,7),e.Gf(Ee,7),e.Gf(we,7),e.Gf(Ue,7),e.Gf(Je,7),e.Gf(Ie,7)),2&n){let o;e.iGM(o=e.CRH())&&(t.impersonateUserLookupModal=o.first),e.iGM(o=e.CRH())&&(t.createTenantModal=o.first),e.iGM(o=e.CRH())&&(t.editTenantModal=o.first),e.iGM(o=e.CRH())&&(t.tenantFeaturesModal=o.first),e.iGM(o=e.CRH())&&(t.dataTable=o.first),e.iGM(o=e.CRH())&&(t.paginator=o.first),e.iGM(o=e.CRH())&&(t.entityTypeHistoryModal=o.first)}},features:[e.qOj],decls:73,vars:55,consts:[[3,"title","description"],["role","actions"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"card","card-custom","gutter-b"],[1,"card-body"],[1,"form"],["autocomplete","new-password",3,"submit"],[1,"form-body"],[1,"row","mb-4"],[1,"col-xl-6"],["for","TenantNameOrTenancyCode",1,"form-label"],[1,"input-group"],["id","TenantNameOrTenancyCode","name","filterText","type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["type","submit",1,"btn","btn-primary"],[1,"flaticon-search-1"],["for","EditionDropdown",1,"form-label"],[3,"selectedEdition","selectedEditionChange"],[1,"form-check","form-check-solid","form-label","py-1","mb-1"],["id","TenantsTable_SubscriptionEndDateRangeActive","type","checkbox","name","SubscriptionEndDateRangeActive","value","true",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["name","SubscriptionEndDateRange","bsDaterangepicker","","dateRangePickerLuxonModifier","",1,"form-control",3,"date","dateChange"],["drpSubscriptionEndDateRange","bsDaterangepicker"],["id","TenantsTable_CreationDateRangeActive","type","checkbox","name","CreationDateRangeActive","value","true",1,"form-check-input",3,"ngModel","ngModelChange"],["name","CreationDateRange","bsDaterangepicker","","dateRangePickerLuxonModifier","",1,"form-control",3,"date","dateChange"],["drpCreationDateRange","bsDaterangepicker"],[1,"col-xl-12","text-end"],["name","RefreshButton",1,"btn","btn-primary"],[1,"fa","fa-sync","btn-md-icon"],[1,"d-none","d-md-inline-block"],[1,"row","align-items-center"],[1,"col","primeng-datatable-container",3,"busyIf"],["sortMode","multiple",3,"value","rows","paginator","lazy","tableStyle","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"primeng-paging-container"],[3,"rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","currentPageReportTemplate","onPageChange"],["paginator",""],[3,"modalSave"],["createTenantModal",""],["editTenantModal",""],["tenantFeaturesModal",""],[3,"itemSelected"],["impersonateUserLookupModal",""],["entityTypeHistoryModal",""],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus","btn-md-icon"],[2,"width","130px"],["pSortableColumn","tenancyName"],["field","tenancyName"],["pSortableColumn","name"],["field","name"],["pSortableColumn","subscriptionEndDateUtc"],["field","subscriptionEndDateUtc"],["pSortableColumn","isActive"],["field","isActive"],["pSortableColumn","creationTime"],["field","creationTime"],["dropdown","","placement","bottom left","container","body",1,"btn-group"],["id","dropdownButton","type","button","dropdownToggle","","aria-controls","dropdownMenu",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"fa","fa-cog"],[1,"caret"],["id","dropdownMenu","class","dropdown-menu","role","menu","aria-labelledby","dropdownButton",4,"dropdownMenu"],[1,"p-column-title"],["class","fa fa-database",3,"title",4,"ngIf"],["class","badge badge-success badge-inline",4,"ngIf"],["class","badge badge-dark badge-inline",4,"ngIf"],["id","dropdownMenu","role","menu","aria-labelledby","dropdownButton",1,"dropdown-menu"],["role","menuitem",3,"disabled",4,"ngIf"],["role","menuitem",4,"ngIf"],["role","menuitem"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"fa","fa-database",3,"title"],[1,"badge","badge-success","badge-inline"],[1,"badge","badge-dark","badge-inline"],[1,"primeng-no-data"]],template:function(n,t){1&n&&(e.TgZ(0,"div")(1,"sub-header",0),e.ALo(2,"localize"),e.ALo(3,"localize"),e.TgZ(4,"div",1),e.YNc(5,De,5,3,"button",2),e.ALo(6,"permission"),e.qZA()(),e.TgZ(7,"div")(8,"div",3)(9,"div",4)(10,"div",5)(11,"form",6),e.NdJ("submit",function(){return t.getTenants()}),e.TgZ(12,"div",7)(13,"div",8)(14,"div",9)(15,"label",10),e._uU(16),e.ALo(17,"localize"),e.qZA(),e.TgZ(18,"div",11)(19,"input",12),e.NdJ("ngModelChange",function(d){return t.filters.filterText=d}),e.ALo(20,"localize"),e.qZA(),e.TgZ(21,"button",13),e._UZ(22,"i",14),e.qZA()()(),e.TgZ(23,"div",9)(24,"label",15),e._uU(25),e.ALo(26,"localize"),e.qZA(),e.TgZ(27,"edition-combo",16),e.NdJ("selectedEditionChange",function(d){return t.filters.selectedEditionId=d}),e.qZA()()(),e.TgZ(28,"div",8)(29,"div",9)(30,"label",17)(31,"input",18),e.NdJ("ngModelChange",function(d){return t.filters.subscriptionEndDateRangeActive=d}),e.qZA(),e.TgZ(32,"span",19),e._uU(33),e.ALo(34,"localize"),e.qZA()(),e.TgZ(35,"input",20,21),e.NdJ("dateChange",function(d){return t.subscriptionDateRange=d}),e.qZA()(),e.TgZ(37,"div",9)(38,"label",17)(39,"input",22),e.NdJ("ngModelChange",function(d){return t.filters.creationDateRangeActive=d}),e.qZA(),e.TgZ(40,"span",19),e._uU(41),e.ALo(42,"localize"),e.qZA()(),e.TgZ(43,"input",23,24),e.NdJ("dateChange",function(d){return t.creationDateRange=d}),e.qZA()()(),e.TgZ(45,"div",8)(46,"div",25)(47,"button",26),e._UZ(48,"i",27),e.TgZ(49,"span",28),e._uU(50),e.ALo(51,"localize"),e.qZA()()()()()()(),e.TgZ(52,"div",29)(53,"div",30)(54,"p-table",31,32),e.NdJ("onLazyLoad",function(d){return t.getTenants(d)}),e.YNc(56,Ne,27,21,"ng-template",33),e.YNc(57,Ge,43,35,"ng-template",34),e.qZA(),e.YNc(58,Oe,3,3,"div",35),e.TgZ(59,"div",36)(60,"p-paginator",37,38),e.NdJ("onPageChange",function(d){return t.getTenants(d)}),e.ALo(62,"localize"),e.qZA()()()()()()(),e.TgZ(63,"createTenantModal",39,40),e.NdJ("modalSave",function(){return t.getTenants()}),e.qZA(),e.TgZ(65,"editTenantModal",39,41),e.NdJ("modalSave",function(){return t.getTenants()}),e.qZA(),e._UZ(67,"tenantFeaturesModal",null,42),e.TgZ(69,"commonLookupModal",43,44),e.NdJ("itemSelected",function(d){return t.impersonateUser(d)}),e.qZA(),e._UZ(71,"entityTypeHistoryModal",null,45),e.qZA()),2&n&&(e.Q6J("@routerTransition",void 0),e.xp6(1),e.Q6J("title",e.lcZ(2,33,"Tenants"))("description",e.lcZ(3,35,"TenantsHeaderInfo")),e.xp6(4),e.Q6J("ngIf",e.lcZ(6,37,"Pages.Tenants.Create")),e.xp6(2),e.Tol(t.containerClass),e.xp6(9),e.hij(" ",e.lcZ(17,39,"TenantNameOrTenancyCode")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(20,41,"SearchWithThreeDot")),e.Q6J("ngModel",t.filters.filterText),e.xp6(3),e.uIk("aria-label",t.l("Search")),e.xp6(3),e.Oqu(e.lcZ(26,43,"Edition")),e.xp6(2),e.Q6J("selectedEdition",t.filters.selectedEditionId),e.xp6(4),e.Q6J("ngModel",t.filters.subscriptionEndDateRangeActive),e.xp6(2),e.hij(" ",e.lcZ(34,45,"SubscriptionEndDate")," "),e.xp6(2),e.Q6J("date",t.subscriptionDateRange),e.uIk("disabled",t.filters.subscriptionEndDateRangeActive?null:"disabled"),e.xp6(4),e.Q6J("ngModel",t.filters.creationDateRangeActive),e.xp6(2),e.hij(" ",e.lcZ(42,47,"CreationTime")," "),e.xp6(2),e.Q6J("date",t.creationDateRange),e.uIk("disabled",t.filters.creationDateRangeActive?null:"disabled"),e.xp6(7),e.hij(" ",e.lcZ(51,49,"Refresh")," "),e.xp6(3),e.Q6J("busyIf",t.primengTableHelper.isLoading),e.xp6(1),e.s9C("rows",t.primengTableHelper.defaultRecordsCountPerPage),e.Q6J("value",t.primengTableHelper.records)("paginator",!1)("lazy",!0)("tableStyle",e.DdM(54,Ke)),e.xp6(4),e.Q6J("ngIf",0==t.primengTableHelper.totalRecordsCount),e.xp6(2),e.Q6J("rows",t.primengTableHelper.defaultRecordsCountPerPage)("totalRecords",t.primengTableHelper.totalRecordsCount)("rowsPerPageOptions",t.primengTableHelper.predefinedRecordsCountPerPage)("showCurrentPageReport",!0)("currentPageReportTemplate",e.xi3(62,51,"TotalRecordsCount",t.primengTableHelper.totalRecordsCount)))},dependencies:[g.O5,r._Y,r.Fj,r.Wl,r.JJ,r.JL,r.On,r.F,x.Hz,x.Mq,x.TO,h.FR,h.TB,N.s,L.A,F.U,R.t,M.iA,P.jx,M.lQ,M.fz,H.D,z,j.$,ae,fe,Me,Ae.n,Z.F,ye.a],encapsulation:2,data:{animation:[(0,I.MH)()]}})),l})(),pathMatch:"full"}];let Ve=(()=>{var a;class l{}return a=l,(0,s.Z)(l,"\u0275fac",function(n){return new(n||a)}),(0,s.Z)(l,"\u0275mod",e.oAB({type:a})),(0,s.Z)(l,"\u0275inj",e.cJS({imports:[b.Bz.forChild(Ye),b.Bz]})),l})(),Be=(()=>{var a;class l{}return a=l,(0,s.Z)(l,"\u0275fac",function(n){return new(n||a)}),(0,s.Z)(l,"\u0275mod",e.oAB({type:a})),(0,s.Z)(l,"\u0275inj",e.cJS({imports:[J.o,U.g,Ve]})),l})()}}]);