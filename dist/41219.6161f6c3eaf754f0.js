"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[41219],{41219:(Q,m,i)=>{i.r(m),i.d(m,{ClientsModule:()=>G});var s=i(81180),f=i(8387),Z=i(40031),g=i(12236),x=i(41840),h=i(64716),b=i(15047),T=i(47530),e=i(99468),_=i(7498),v=i(98547),w=i(69862),C=i(96814),d=i(56223),c=i(73552),A=i(32925),M=i(94901),u=i(56916),U=i(85219),y=i(51712),z=i(57102),H=i(68989),F=i(63346),P=i(3291);const L=["clientCreationModal"],E=["paginator"],S=["dataTable"],O=["ExcelFileUpload"];function I(l,a){if(1&l){const r=e.EpF();e.TgZ(0,"ul",33)(1,"li",34)(2,"a",35),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.exportToExcel())}),e._UZ(3,"i",36),e._uU(4),e.ALo(5,"localize"),e.qZA()(),e.TgZ(6,"li",34)(7,"a",37)(8,"span",38)(9,"p-fileUpload",39,40),e.NdJ("uploadHandler",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.uploadExcel(t))})("onError",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.onUploadExcelError())}),e.ALo(11,"localize"),e.qZA()()()(),e._UZ(12,"li",41),e.TgZ(13,"li",34)(14,"span",42),e._UZ(15,"small",43),e.qZA()()()}if(2&l){const r=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,3,"ExportToExcel")," "),e.xp6(5),e.s9C("chooseLabel",e.lcZ(11,5,"ImportFromExcel")),e.xp6(6),e.Q6J("innerHTML",r.l("ImportToExcelSampleFileDownloadInfo","<a href=/assets/sampleFiles/ImportClientsSampleFile.xlsx>"+r.l("ClickHere")+"</a>"),e.oJD)}}function R(l,a){1&l&&(e.TgZ(0,"tr")(1,"th",44),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"th",45),e._uU(5),e.ALo(6,"localize"),e._UZ(7,"p-sortIcon",46),e.qZA(),e.TgZ(8,"th",47),e._uU(9),e.ALo(10,"localize"),e._UZ(11,"p-sortIcon",48),e.qZA(),e.TgZ(12,"th",49),e._uU(13),e.ALo(14,"localize"),e._UZ(15,"p-sortIcon",50),e.qZA(),e.TgZ(16,"th",51),e._uU(17),e.ALo(18,"localize"),e._UZ(19,"p-sortIcon",52),e.qZA(),e.TgZ(20,"th",53),e._uU(21),e.ALo(22,"localize"),e._UZ(23,"p-sortIcon",54),e.qZA()()),2&l&&(e.xp6(2),e.hij(" ",e.lcZ(3,6,"Actions")," "),e.xp6(3),e.hij(" ",e.lcZ(6,8,"Full legal name")," "),e.xp6(4),e.hij(" ",e.lcZ(10,10,"Email")," "),e.xp6(4),e.hij(" ",e.lcZ(14,12,"Address")," "),e.xp6(4),e.hij(" ",e.lcZ(18,14,"Date created")," "),e.xp6(4),e.hij(" ",e.lcZ(22,16,"Created by")," "))}function j(l,a){if(1&l){const r=e.EpF();e.TgZ(0,"ul",62)(1,"li",34)(2,"a",63),e.NdJ("click",function(){e.CHM(r);const t=e.oxw().$implicit;e.oxw();const o=e.MAs(42);return e.KtG(o.showModal(t))}),e._uU(3),e.ALo(4,"localize"),e.qZA()(),e.TgZ(5,"li",34)(6,"a",63),e.NdJ("click",function(){e.CHM(r);const t=e.oxw().$implicit,o=e.oxw();return e.KtG(o.deleteSelectedClient(t))}),e._uU(7),e.ALo(8,"localize"),e.qZA()()()}2&l&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"Edit")," "),e.xp6(4),e.hij(" ",e.lcZ(8,4,"Delete")," "))}function J(l,a){if(1&l&&(e.TgZ(0,"tr")(1,"td",44)(2,"div",55)(3,"button",56),e._UZ(4,"i",57)(5,"span",58),e._uU(6),e.ALo(7,"localize"),e.qZA(),e.YNc(8,j,9,6,"ul",59),e.qZA()(),e.TgZ(9,"td",60)(10,"span",61),e._uU(11),e.ALo(12,"localize"),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"td",60)(15,"span",61),e._uU(16),e.ALo(17,"localize"),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"td",60)(20,"span",61),e._uU(21),e.ALo(22,"localize"),e.qZA(),e._uU(23),e.qZA(),e.TgZ(24,"td",60)(25,"span",61),e._uU(26),e.ALo(27,"localize"),e.qZA(),e._uU(28),e.ALo(29,"date"),e.qZA(),e.TgZ(30,"td",60)(31,"span",61),e._uU(32),e.ALo(33,"localize"),e.qZA(),e._uU(34),e.qZA()()),2&l){const r=a.$implicit;e.xp6(6),e.hij(" ",e.lcZ(7,11,"Actions")," "),e.xp6(5),e.Oqu(e.lcZ(12,13,"Name")),e.xp6(2),e.hij(" ",r.name," "),e.xp6(3),e.Oqu(e.lcZ(17,15,"Email")),e.xp6(2),e.hij(" ",r.email," "),e.xp6(3),e.Oqu(e.lcZ(22,17,"ADdress")),e.xp6(2),e.hij(" ",r.address1," "),e.xp6(3),e.Oqu(e.lcZ(27,19,"Date created")),e.xp6(2),e.hij(" ",e.xi3(29,21,r.creationTime,"MM/dd/yyyy hh:mm:ss aa")," "),e.xp6(4),e.Oqu(e.lcZ(33,24,"Created by")),e.xp6(2),e.hij(" ",r.creatorUserId," ")}}function N(l,a){1&l&&(e.TgZ(0,"div",64),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&l&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NoData")," "))}const D=function(){return{"min-width":"50rem"}},q=[{path:"",component:(()=>{var l;class a extends x.c{constructor(n,t,o,p){super(n),(0,s.Z)(this,"clientService",void 0),(0,s.Z)(this,"_fileDownloadService",void 0),(0,s.Z)(this,"_httpClient",void 0),(0,s.Z)(this,"clientCreationModal",void 0),(0,s.Z)(this,"paginator",void 0),(0,s.Z)(this,"dataTable",void 0),(0,s.Z)(this,"excelFileUpload",void 0),(0,s.Z)(this,"actions",void 0),(0,s.Z)(this,"searchFilter",""),(0,s.Z)(this,"uploadUrl",void 0),(0,s.Z)(this,"howToCreateClientUrl","https://companyquote.org/docs/how-to-add-a-client/"),this.clientService=t,this._fileDownloadService=o,this._httpClient=p,this.uploadUrl=b.g.remoteServiceBaseUrl+"/Clients/ImportFromExcel"}ngOnInit(){}ngAfterViewInit(){this.primengTableHelper.adjustScroll(this.dataTable)}getClients(n){if(this.primengTableHelper.shouldResetPaging(n)&&(this.paginator.changePage(0),this.primengTableHelper.records&&this.primengTableHelper.records.length>0))return;this.primengTableHelper.showLoadingIndicator();const t={filter:this.searchFilter||"",sorting:this.primengTableHelper.getSorting(this.dataTable),maxResultCount:this.primengTableHelper.getMaxResultCount(this.paginator,n),skipCount:this.primengTableHelper.getSkipCount(this.paginator,n)};this.clientService.getClientsWithFilters(t).pipe((0,h.x)(()=>this.primengTableHelper.hideLoadingIndicator())).subscribe(o=>{this.primengTableHelper.totalRecordsCount=o.result.totalCount,this.primengTableHelper.records=o.result.items,this.primengTableHelper.hideLoadingIndicator()},o=>{this.primengTableHelper.hideLoadingIndicator()})}createClient(){this.clientCreationModal.showModal()}deleteSelectedClient(n){this.message.confirm(`Are you sure you want to delete client ${null==n?void 0:n.name}`,"",t=>{t&&this.clientService.deleteClient(n.id).subscribe(o=>{this.notify.success(this.l("SuccessfullyDeleted")),this.paginator.changePage(this.paginator.getPage())},o=>{this.notify.error(`Error: ${o.message}`)})})}onFilter(){""===this.searchFilter&&this.getClients()}navigateToHowItWorks(){window.open(this.howToCreateClientUrl,"_blank")}exportToExcel(){const n={searchValue:this.searchFilter||"",sorting:this.primengTableHelper.getSorting(this.dataTable)};this.clientService.getClientsToExcel(n).subscribe(t=>{this._fileDownloadService.downloadTempFile(null==t?void 0:t.result)})}uploadExcel(n){const t=new FormData,o=n.files[0];t.append("file",o,o.name),this._httpClient.post(this.uploadUrl,t).pipe((0,h.x)(()=>this.excelFileUpload.clear())).subscribe(p=>{p.success?this.notify.success(this.l("ImportUsersProcessStart")):null!=p.error&&this.notify.error(this.l("ImportUsersUploadFailed"))})}onUploadExcelError(){this.notify.error(this.l("ImportUsersUploadFailed"))}}return l=a,(0,s.Z)(a,"\u0275fac",function(n){return new(n||l)(e.Y36(e.zs3),e.Y36(_.a),e.Y36(v._),e.Y36(w.eN))}),(0,s.Z)(a,"\u0275cmp",e.Xpm({type:l,selectors:[["app-clients"]],viewQuery:function(n,t){if(1&n&&(e.Gf(L,7),e.Gf(E,7),e.Gf(S,7),e.Gf(O,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.clientCreationModal=o.first),e.iGM(o=e.CRH())&&(t.paginator=o.first),e.iGM(o=e.CRH())&&(t.dataTable=o.first),e.iGM(o=e.CRH())&&(t.excelFileUpload=o.first)}},features:[e.qOj],decls:43,vars:37,consts:[[1,"client-container","container"],[1,"c-route-page-container"],[1,"p-28"],[3,"title","description","url"],["role","actions"],["dropdown","","placement","button right",1,"btn-group"],["id","dropdownButtonExcelOperations","dropdownToggle","","type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false","aria-controls","dropdownMenuExcelOperations",1,"btn","btn-outline","btn-outline-success","btn-active-light-success","dropdown-toggle","me-1"],[1,"far","fa-file-excel","btn-md-icon"],[1,"d-none","d-md-inline-block"],["id","dropdownMenuExcelOperations","class","dropdown-menu dropdown-menu-right dropdown-excel-operations","role","menu","aria-labelledby","dropdownButtonExcelOperations",4,"dropdownMenu"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus","btn-md-icon"],[1,"card","card-custom","gutter-b"],[1,"card-body"],[1,"row","align-items-center","mb-4"],[1,"col-xl-12"],[1,"mb-5","m-form__group","align-items-center"],[1,"input-group"],["name","filterText","autoFocus","","type","text",1,"form-control","m-input",3,"ngModel","placeholder","ngModelChange","keyup.enter","blur"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"flaticon-search-1"],[1,"row","align-items-center"],[1,"primeng-datatable-container",3,"busyIf"],["sortMode","multiple","ScrollWidth","100%","scrollDirection","horizontal",3,"value","rows","paginator","lazy","scrollable","tableStyle","resizableColumns","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"primeng-paging-container"],[3,"rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","currentPageReportTemplate","onPageChange"],["paginator",""],[3,"onModalSave"],["clientCreationModal",""],["id","dropdownMenuExcelOperations","role","menu","aria-labelledby","dropdownButtonExcelOperations",1,"dropdown-menu","dropdown-menu-right","dropdown-excel-operations"],["role","menuitem"],["id","ExportUsersToExcelButton","href","javascript:;",1,"dropdown-item","text-dark",3,"click"],[1,"fa","fa-download","me-2","mt-1","text-dark",2,"font-size","1rem"],["href","javascript:;",1,"no-padding"],[1,"fileinput-button"],["customUpload","true","name","ExcelFileUpload","maxFileSize","10000000","auto","auto","accept",".csv,.xls,.xlsx",3,"chooseLabel","uploadHandler","onError"],["ExcelFileUpload",""],[1,"divider","dropdown-divider"],["href","#",1,"dropdown-item-text","text-muted","pl-3"],[3,"innerHTML"],[2,"min-width","130px"],["pSortableColumn","name",2,"min-width","150px"],["field","name"],["pSortableColumn","email",2,"min-width","150px"],["field","email"],["pSortableColumn","address1",2,"min-width","150px"],["field","address1"],["pSortableColumn","creationTime",2,"min-width","150px"],["field","creationTime"],["pSortableColumn","creatorUserId",2,"min-width","150px"],["field","creatorUserId"],["dropdown","","placement","bottom left","container","body",1,"btn-group"],["id","dropdownButton","type","button","dropdownToggle","","aria-controls","dropdownMenu",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"fa","fa-cog"],[1,"caret"],["id","dropdownMenu","class","dropdown-menu","role","menu","aria-labelledby","dropdownButton",4,"dropdownMenu"],[2,"min-width","150px"],[1,"p-column-title"],["id","dropdownMenu","role","menu","aria-labelledby","dropdownButton",1,"dropdown-menu"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"primeng-no-data"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"sub-header",3),e.ALo(4,"localize"),e.ALo(5,"localize"),e.TgZ(6,"div",4)(7,"div",5)(8,"button",6),e._UZ(9,"i",7),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"localize"),e.qZA()(),e.YNc(13,I,16,7,"ul",9),e.qZA(),e.TgZ(14,"button",10),e.NdJ("click",function(){return t.createClient()}),e._UZ(15,"i",11),e.TgZ(16,"span",8),e._uU(17),e.ALo(18,"localize"),e.qZA()()()()()(),e.TgZ(19,"div")(20,"div",12)(21,"div",13)(22,"div")(23,"div",14)(24,"div",15)(25,"div",16)(26,"div",17)(27,"input",18),e.NdJ("ngModelChange",function(p){return t.searchFilter=p})("keyup.enter",function(){return t.getClients()})("blur",function(){return t.onFilter()}),e.qZA(),e.TgZ(28,"button",19),e.NdJ("click",function(){return t.getClients()}),e._UZ(29,"i",20),e.qZA()()()()()(),e.TgZ(30,"div",21)(31,"div",22)(32,"p-table",23,24),e.NdJ("onLazyLoad",function(p){return t.getClients(p)}),e.YNc(34,R,24,18,"ng-template",25),e.YNc(35,J,35,26,"ng-template",26),e.qZA(),e.YNc(36,N,3,3,"div",27),e.TgZ(37,"div",28)(38,"p-paginator",29,30),e.NdJ("onPageChange",function(p){return t.getClients(p)}),e.ALo(40,"localize"),e.qZA()()()()()()()(),e.TgZ(41,"app-client-creation",31,32),e.NdJ("onModalSave",function(){return t.getClients()}),e.qZA()),2&n&&(e.Q6J("@routerTransition",void 0),e.xp6(3),e.Q6J("title",e.lcZ(4,25,"Clients"))("description",e.lcZ(5,27,"How to create Clients? (click here to watch video)"))("url",t.howToCreateClientUrl),e.xp6(8),e.hij(" ",e.lcZ(12,29,"ExcelOperations")," "),e.xp6(6),e.hij(" ",e.lcZ(18,31,"Add new client")," "),e.xp6(2),e.Tol(t.containerClass),e.xp6(8),e.Q6J("ngModel",t.searchFilter)("placeholder",t.l("SearchWithThreeDot")),e.xp6(2),e.uIk("aria-label",t.l("Search")),e.xp6(2),e.Q6J("busyIf",t.primengTableHelper.isLoading),e.xp6(1),e.s9C("rows",t.primengTableHelper.defaultRecordsCountPerPage),e.Q6J("value",t.primengTableHelper.records)("paginator",!1)("lazy",!0)("scrollable",!0)("tableStyle",e.DdM(36,D))("resizableColumns",t.primengTableHelper.resizableColumns),e.xp6(4),e.Q6J("ngIf",0==t.primengTableHelper.totalRecordsCount),e.xp6(2),e.Q6J("rows",t.primengTableHelper.defaultRecordsCountPerPage)("totalRecords",t.primengTableHelper.totalRecordsCount)("rowsPerPageOptions",t.primengTableHelper.predefinedRecordsCountPerPage)("showCurrentPageReport",!0)("currentPageReportTemplate",e.xi3(40,33,"TotalRecordsCount",t.primengTableHelper.totalRecordsCount)))},dependencies:[C.O5,d.Fj,d.JJ,d.On,c.Hz,c.Mq,c.TO,A.h,M.U,u.iA,U.jx,u.lQ,u.fz,y.D,z.p,H.$,F.w,C.uU,P.F],styles:[".toolbar[_ngcontent-%COMP%]{height:55px;display:flex;align-items:center;border-top:1px solid #EFF2F5;background:#ffffff;box-shadow:0 10px 30px #523f690d;left:265px;transition:left .3s ease;padding:0 30px}.client-container[_ngcontent-%COMP%]{background-color:#f5f8ff}.client-container[_ngcontent-%COMP%]   .c-route-page-container[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.client-container[_ngcontent-%COMP%]   .c-route-page-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:1.14rem}.p-28[_ngcontent-%COMP%]{padding-top:28px;padding-bottom:28px}.search[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:50%;padding-bottom:0!important;margin-bottom:0!important}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{flex-shrink:0;border-radius:12px;background:var(--Primary-Base-White, #FFF);box-shadow:0 25.787px 53.723px 4.298px #5a52800d}.text-header[_ngcontent-%COMP%]{color:#000624;font-family:Roboto;font-size:18px;font-style:normal;font-weight:600;line-height:normal}.text-des[_ngcontent-%COMP%]{color:#00062480;font-family:Roboto;font-size:10.5px;font-style:normal;font-weight:400;line-height:normal;opacity:unset!important}.container[_ngcontent-%COMP%]{padding:0!important}"],data:{animation:[(0,T.MH)()]}})),a})(),pathMatch:"full"}];let B=(()=>{var l;class a{}return l=a,(0,s.Z)(a,"\u0275fac",function(n){return new(n||l)}),(0,s.Z)(a,"\u0275mod",e.oAB({type:l})),(0,s.Z)(a,"\u0275inj",e.cJS({imports:[g.Bz.forChild(q),g.Bz]})),a})(),G=(()=>{var l;class a{}return l=a,(0,s.Z)(a,"\u0275fac",function(n){return new(n||l)}),(0,s.Z)(a,"\u0275mod",e.oAB({type:l})),(0,s.Z)(a,"\u0275inj",e.cJS({imports:[Z.o,f.g,B]})),a})()}}]);