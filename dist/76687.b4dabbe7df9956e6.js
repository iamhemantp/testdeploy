"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[76687],{76687:(ne,f,r)=>{r.r(f),r.d(f,{LanguageTextsModule:()=>ae});var l=r(81180),L=r(8387),C=r(40031),d=r(12236),_=r(47530),x=r(41840),M=r(74550),N=r(66232),Z=r(64716),e=r(99468),c=r(44328),m=r(96814),u=r(56223),y=r(32925),A=r(94901),p=r(56916),J=r(85219),S=r(51712),z=r(68989),T=r(78853),F=r(45513),U=r(24142),v=r(3291);const H=["modal"],V=function(o){return{edited:o}};function R(o,g){if(1&o){const i=e.EpF();e.TgZ(0,"form",5,6),e.NdJ("ngSubmit",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.save())}),e.TgZ(2,"div",7)(3,"h4",8)(4,"span"),e._uU(5),e.ALo(6,"localize"),e.qZA()(),e.TgZ(7,"button",9),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.close())}),e.qZA()(),e.TgZ(8,"div",10)(9,"div",11)(10,"label",12),e._uU(11),e.ALo(12,"localize"),e.qZA(),e.TgZ(13,"div")(14,"strong"),e._uU(15),e.qZA()()(),e.TgZ(16,"div",13)(17,"label",14),e._UZ(18,"i"),e._uU(19),e.qZA(),e._UZ(20,"textarea",15),e.qZA(),e.TgZ(21,"div",13)(22,"label",16),e._UZ(23,"i"),e._uU(24),e.qZA(),e.TgZ(25,"textarea",17,18),e.NdJ("ngModelChange",function(a){e.CHM(i);const n=e.oxw();return e.KtG(n.model.value=a)}),e.qZA()()(),e.TgZ(27,"div",19)(28,"button",20),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.close())}),e._uU(29),e.ALo(30,"localize"),e.qZA(),e.TgZ(31,"button",21),e._UZ(32,"i",22),e.TgZ(33,"span"),e._uU(34),e.ALo(35,"localize"),e.qZA()()()()}if(2&o){const i=e.MAs(1),t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,22,"EditText")),e.xp6(2),e.Q6J("disabled",t.saving),e.uIk("aria-label",t.l("Close")),e.xp6(4),e.Oqu(e.lcZ(12,24,"Key")),e.xp6(4),e.Oqu(t.model.key),e.xp6(3),e.Gre("d-inline-block ",t.baseLanguage.icon,""),e.xp6(1),e.hij(" ",t.baseLanguage.displayName," "),e.xp6(1),e.Q6J("ngModel",t.baseText),e.xp6(3),e.Gre("d-inline-block ",t.targetLanguage.icon,""),e.xp6(1),e.hij(" ",t.targetLanguage.displayName," "),e.xp6(1),e.Q6J("ngClass",e.VKq(30,V,t.model.value))("ngModel",t.model.value),e.xp6(3),e.Q6J("disabled",t.saving),e.xp6(1),e.hij(" ",e.lcZ(30,26,"Cancel")," "),e.xp6(2),e.Q6J("disabled",!i.form.valid)("buttonBusy",t.saving)("busyText",t.l("SavingWithThreeDot")),e.xp6(3),e.Oqu(e.lcZ(35,28,"Save"))}}const q=function(o){return{backdrop:"static",keyboard:o}};let Q=(()=>{var o;class g extends x.c{constructor(t,a){super(t),(0,l.Z)(this,"_languageService",void 0),(0,l.Z)(this,"modal",void 0),(0,l.Z)(this,"modalSave",new e.vpe),(0,l.Z)(this,"model",new c.L3G),(0,l.Z)(this,"baseText",void 0),(0,l.Z)(this,"baseLanguage",void 0),(0,l.Z)(this,"targetLanguage",void 0),(0,l.Z)(this,"active",!1),(0,l.Z)(this,"saving",!1),this._languageService=a}show(t,a,n,s,b,oe){this.model.sourceName=n,this.model.key=s,this.model.languageName=a,this.model.value=oe,this.baseText=b,this.baseLanguage=(0,T.Z)(abp.localization.languages,h=>h.name===t),this.targetLanguage=(0,T.Z)(abp.localization.languages,h=>h.name===a),this.active=!0,this.modal.show()}onShown(){document.getElementById("TargetLanguageDisplayName").focus()}save(){this.saving=!0,this._languageService.updateLanguageText(this.model).pipe((0,Z.x)(()=>this.saving=!1)).subscribe(()=>{this.notify.info(this.l("SavedSuccessfully")),this.close(),this.modalSave.emit(null)})}close(){this.active=!1,this.modal.hide()}findLanguage(t){return(0,T.Z)(abp.localization.languages,a=>a.name===t)}}return o=g,(0,l.Z)(g,"\u0275fac",function(t){return new(t||o)(e.Y36(e.zs3),e.Y36(c.afF))}),(0,l.Z)(g,"\u0275cmp",e.Xpm({type:o,selectors:[["editTextModal"]],viewQuery:function(t,a){if(1&t&&e.Gf(H,7),2&t){let n;e.iGM(n=e.CRH())&&(a.modal=n.first)}},outputs:{modalSave:"modalSave"},features:[e.qOj],decls:5,vars:4,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","createOrEditModal","aria-hidden","true",1,"modal","fade",3,"config","onShown"],["modal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],["novalidate","",3,"ngSubmit",4,"ngIf"],["novalidate","",3,"ngSubmit"],["editForm","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"disabled","click"],[1,"modal-body"],[1,"mb-5"],[1,"form-label"],[1,"mb-5","form-md-line-input","form-md-floating-label","no-hint"],["for","BaseLanguageDisplayName",1,"form-label"],["id","BaseLanguageDisplayName","readonly","","rows","4","name","baseText",1,"form-control","edited",3,"ngModel"],["for","TargetLanguageDisplayName",1,"form-label"],["id","TargetLanguageDisplayName","rows","4","name","value",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["targetValueInput",""],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","fw-bold",3,"disabled","click"],["type","submit",1,"btn","btn-primary","fw-bold",3,"disabled","buttonBusy","busyText"],[1,"fa","fa-save"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0,1),e.NdJ("onShown",function(){return a.onShown()}),e.TgZ(2,"div",2)(3,"div",3),e.YNc(4,R,36,32,"form",4),e.qZA()()()),2&t&&(e.Q6J("config",e.VKq(2,q,!a.saving)),e.xp6(4),e.Q6J("ngIf",a.active))},dependencies:[m.mk,m.O5,u._Y,u.Fj,u.JJ,u.JL,u.On,u.F,F.L,U.Z,v.F],encapsulation:2})),g})();const G=["targetLanguageNameCombobox"],O=["baseLanguageNameCombobox"],P=["sourceNameCombobox"],j=["targetValueFilterCombobox"],E=["textsTable"],w=["editTextModal"],I=["dataTable"],Y=["paginator"];function B(o,g){if(1&o&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&o){const i=g.$implicit;e.Q6J("value",i.name),e.uIk("data-icon",i.icon),e.xp6(1),e.hij(" ",i.displayName," ")}}function k(o,g){if(1&o&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&o){const i=g.$implicit;e.Q6J("value",i.name),e.uIk("data-icon",i.icon),e.xp6(1),e.hij(" ",i.displayName," ")}}function K(o,g){if(1&o&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&o){const i=g.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",i," ")}}function D(o,g){1&o&&(e.TgZ(0,"tr")(1,"th",41),e._uU(2),e.ALo(3,"localize"),e._UZ(4,"p-sortIcon",42),e.qZA(),e.TgZ(5,"th",43),e._uU(6),e.ALo(7,"localize"),e._UZ(8,"p-sortIcon",44),e.qZA(),e.TgZ(9,"th",45),e._uU(10),e.ALo(11,"localize"),e._UZ(12,"p-sortIcon",46),e.qZA(),e.TgZ(13,"th",47),e._uU(14),e.ALo(15,"localize"),e.qZA()()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,4,"Key")," "),e.xp6(4),e.hij(" ",e.lcZ(7,6,"BaseValue")," "),e.xp6(4),e.hij(" ",e.lcZ(11,8,"TargetValue")," "),e.xp6(4),e.Oqu(e.lcZ(15,10,"Edit")))}function $(o,g){if(1&o){const i=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span",48),e._uU(3),e.ALo(4,"localize"),e.qZA(),e.TgZ(5,"span",49),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"span",48),e._uU(9),e.ALo(10,"localize"),e.qZA(),e.TgZ(11,"span",49),e._uU(12),e.qZA()(),e.TgZ(13,"td")(14,"span",48),e._uU(15),e.ALo(16,"localize"),e.qZA(),e.TgZ(17,"span",49),e._uU(18),e.qZA()(),e.TgZ(19,"td")(20,"button",50),e.NdJ("click",function(){const n=e.CHM(i).$implicit,s=e.oxw(),b=e.MAs(68);return e.KtG(b.show(s.baseLanguageName,s.targetLanguageName,s.sourceName,n.key,n.baseValue,n.targetValue))}),e.ALo(21,"localize"),e._UZ(22,"i",51),e.qZA()()()}if(2&o){const i=g.$implicit,t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,11,"Key")),e.xp6(2),e.s9C("title",i.key),e.xp6(1),e.Oqu(t.truncateString(i.key)),e.xp6(3),e.Oqu(e.lcZ(10,13,"BaseValue")),e.xp6(2),e.s9C("title",i.baseValue),e.xp6(1),e.hij(" ",t.truncateString(i.baseValue)," "),e.xp6(3),e.Oqu(e.lcZ(16,15,"TargetValue")),e.xp6(2),e.s9C("title",i.targetValue),e.xp6(1),e.hij(" ",t.truncateString(i.targetValue)," "),e.xp6(2),e.s9C("title",e.lcZ(21,17,"Edit")),e.xp6(2),e.uIk("aria-label",t.l("Edit"))}}function W(o,g){1&o&&(e.TgZ(0,"div",52),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NoData")," "))}const X=function(){return{"min-width":"50rem"}},ee=[{path:"",component:(()=>{var o;class g extends x.c{constructor(t,a,n,s){super(t),(0,l.Z)(this,"_languageService",void 0),(0,l.Z)(this,"_router",void 0),(0,l.Z)(this,"_activatedRoute",void 0),(0,l.Z)(this,"targetLanguageNameCombobox",void 0),(0,l.Z)(this,"baseLanguageNameCombobox",void 0),(0,l.Z)(this,"sourceNameCombobox",void 0),(0,l.Z)(this,"targetValueFilterCombobox",void 0),(0,l.Z)(this,"textsTable",void 0),(0,l.Z)(this,"editTextModal",void 0),(0,l.Z)(this,"dataTable",void 0),(0,l.Z)(this,"paginator",void 0),(0,l.Z)(this,"sourceNames",[]),(0,l.Z)(this,"languages",[]),(0,l.Z)(this,"targetLanguageName",void 0),(0,l.Z)(this,"sourceName",void 0),(0,l.Z)(this,"baseLanguageName",void 0),(0,l.Z)(this,"targetValueFilter",void 0),(0,l.Z)(this,"filterText",void 0),this._languageService=a,this._router=n,this._activatedRoute=s}ngOnInit(){this.sourceNames=(0,M.Z)((0,N.Z)(abp.localization.sources,t=>"MultiTenantLocalizationSource"===t.type),t=>t.name),this.languages=abp.localization.languages,this.init()}getLanguageTexts(t){!this.paginator||!this.dataTable||!this.sourceName||(this.primengTableHelper.showLoadingIndicator(),this._languageService.getLanguageTexts(this.primengTableHelper.getMaxResultCount(this.paginator,t),this.primengTableHelper.getSkipCount(this.paginator,t),this.primengTableHelper.getSorting(this.dataTable),this.sourceName,this.baseLanguageName,this.targetLanguageName,this.targetValueFilter,this.filterText).pipe((0,Z.x)(()=>this.primengTableHelper.hideLoadingIndicator())).subscribe(a=>{this.primengTableHelper.totalRecordsCount=a.totalCount,this.primengTableHelper.records=a.items,this.primengTableHelper.hideLoadingIndicator()}))}init(){this._activatedRoute.params.subscribe(t=>{this.baseLanguageName=t.baseLanguageName||abp.localization.currentLanguage.name,this.targetLanguageName=t.name,this.sourceName=t.sourceName||"CompanyQuote",this.targetValueFilter=t.targetValueFilter||"ALL",this.filterText=t.filterText||"",this.reloadPage()})}reloadPage(){this.paginator.changePage(this.paginator.getPage())}applyFilters(t){this._router.navigate(["app/admin/languages",this.targetLanguageName,"texts",{sourceName:this.sourceName,baseLanguageName:this.baseLanguageName,targetValueFilter:this.targetValueFilter,filterText:this.filterText}]),this.paginator.changePage(0)}truncateString(t){return abp.utils.truncateStringWithPostfix(t,32,"...")}refreshTextValueFromModal(){for(let t=0;t<this.primengTableHelper.records.length;t++)if(this.primengTableHelper.records[t].key===this.editTextModal.model.key)return void(this.primengTableHelper.records[t].targetValue=this.editTextModal.model.value)}}return o=g,(0,l.Z)(g,"\u0275fac",function(t){return new(t||o)(e.Y36(e.zs3),e.Y36(c.afF),e.Y36(d.F0),e.Y36(d.gz))}),(0,l.Z)(g,"\u0275cmp",e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,a){if(1&t&&(e.Gf(G,7),e.Gf(O,7),e.Gf(P,7),e.Gf(j,7),e.Gf(E,7),e.Gf(w,7),e.Gf(I,7),e.Gf(Y,7)),2&t){let n;e.iGM(n=e.CRH())&&(a.targetLanguageNameCombobox=n.first),e.iGM(n=e.CRH())&&(a.baseLanguageNameCombobox=n.first),e.iGM(n=e.CRH())&&(a.sourceNameCombobox=n.first),e.iGM(n=e.CRH())&&(a.targetValueFilterCombobox=n.first),e.iGM(n=e.CRH())&&(a.textsTable=n.first),e.iGM(n=e.CRH())&&(a.editTextModal=n.first),e.iGM(n=e.CRH())&&(a.dataTable=n.first),e.iGM(n=e.CRH())&&(a.paginator=n.first)}},features:[e.qOj],decls:69,vars:57,consts:[[3,"title","description"],[1,"card","card-custom","gutter-b"],[1,"card-body"],["autocomplete","new-password","id","TextsFilterForm",1,"form"],[1,"row","align-items-center","m--margin-bottom-10"],[1,"col-sm-6","col-md-3"],[1,"mb-5"],["for","TextBaseLanguageSelectionCombobox",1,"form-label"],["name","baseLanguageName",1,"form-control","bs-select",3,"ngModel","ngModelChange"],["baseLanguageNameCombobox",""],[3,"value",4,"ngFor","ngForOf"],["for","TextTargetLanguageSelectionCombobox",1,"form-label"],["name","targetLanguageName",1,"form-control","bs-select",3,"ngModel","ngModelChange"],["targetLanguageNameCombobox",""],["for","TextSourceSelectionCombobox",1,"form-label"],["name","sourceName",1,"form-control","bs-select",3,"ngModel","ngModelChange"],["sourceNameCombobox",""],["for","TargetValueFilterSelectionCombobox",1,"form-label"],["name","targetValueFilter",1,"form-control","bs-select",3,"ngModel","ngModelChange"],["targetValueFilterCombobox",""],["value","ALL"],["value","EMPTY"],[1,"row","align-items-center","mb-4"],[1,"col-sm-12"],[1,"input-group"],["name","filterText","autoFocus","","type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],[1,"row","align-items-center"],[1,"col","primeng-datatable-container",3,"busyIf"],["sortMode","multiple",3,"value","rows","paginator","lazy","tableStyle","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"primeng-paging-container"],[3,"rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","currentPageReportTemplate","onPageChange"],["paginator",""],[3,"modalSave"],["editTextModal",""],[3,"value"],["pSortableColumn","key"],["field","key"],["pSortableColumn","baseValue"],["field","baseValue"],["pSortableColumn","targetValue"],["field","targetValue"],[2,"width","100px"],[1,"p-column-title"],[3,"title"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"title","click"],[1,"la","la-edit"],[1,"primeng-no-data"]],template:function(t,a){1&t&&(e.TgZ(0,"div"),e._UZ(1,"sub-header",0),e.ALo(2,"localize"),e.ALo(3,"localize"),e.TgZ(4,"div")(5,"div",1)(6,"div",2)(7,"form",3)(8,"div")(9,"div",4)(10,"div",5)(11,"div",6)(12,"label",7),e._uU(13),e.ALo(14,"localize"),e.qZA(),e.TgZ(15,"select",8,9),e.NdJ("ngModelChange",function(s){return a.baseLanguageName=s}),e.YNc(17,B,2,3,"option",10),e.qZA()()(),e.TgZ(18,"div",5)(19,"div",6)(20,"label",11),e._uU(21),e.ALo(22,"localize"),e.qZA(),e.TgZ(23,"select",12,13),e.NdJ("ngModelChange",function(s){return a.targetLanguageName=s}),e.YNc(25,k,2,3,"option",10),e.qZA()()(),e.TgZ(26,"div",5)(27,"div",6)(28,"label",14),e._uU(29),e.ALo(30,"localize"),e.qZA(),e.TgZ(31,"select",15,16),e.NdJ("ngModelChange",function(s){return a.sourceName=s}),e.YNc(33,K,2,2,"option",10),e.qZA()()(),e.TgZ(34,"div",5)(35,"div",6)(36,"label",17),e._uU(37),e.ALo(38,"localize"),e.qZA(),e.TgZ(39,"select",18,19),e.NdJ("ngModelChange",function(s){return a.targetValueFilter=s}),e.TgZ(41,"option",20),e._uU(42),e.ALo(43,"localize"),e.qZA(),e.TgZ(44,"option",21),e._uU(45),e.ALo(46,"localize"),e.qZA()()()()(),e.TgZ(47,"div",22)(48,"div",23)(49,"div",24)(50,"input",25),e.NdJ("ngModelChange",function(s){return a.filterText=s}),e.ALo(51,"localize"),e.qZA(),e.TgZ(52,"button",26),e.NdJ("click",function(s){return a.applyFilters(s)}),e._UZ(53,"i",27),e._uU(54),e.ALo(55,"localize"),e.qZA()()()()()(),e.TgZ(56,"div",28)(57,"div",29)(58,"p-table",30,31),e.NdJ("onLazyLoad",function(s){return a.getLanguageTexts(s)}),e.YNc(60,D,16,12,"ng-template",32),e.YNc(61,$,23,19,"ng-template",33),e.qZA(),e.YNc(62,W,3,3,"div",34),e.TgZ(63,"div",35)(64,"p-paginator",36,37),e.NdJ("onPageChange",function(s){return a.getLanguageTexts(s)}),e.ALo(66,"localize"),e.qZA()()()()()()(),e.TgZ(67,"editTextModal",38,39),e.NdJ("modalSave",function(){return a.refreshTextValueFromModal()}),e.qZA()()),2&t&&(e.Q6J("@routerTransition",void 0),e.xp6(1),e.Q6J("title",e.lcZ(2,33,"LanguageTexts"))("description",e.lcZ(3,35,"LanguageTextsHeaderInfo")),e.xp6(3),e.Tol(a.containerClass),e.xp6(9),e.hij(" ",e.lcZ(14,37,"BaseLanguage")," "),e.xp6(2),e.Q6J("ngModel",a.baseLanguageName),e.xp6(2),e.Q6J("ngForOf",a.languages),e.xp6(4),e.hij(" ",e.lcZ(22,39,"TargetLanguage")," "),e.xp6(2),e.Q6J("ngModel",a.targetLanguageName),e.xp6(2),e.Q6J("ngForOf",a.languages),e.xp6(4),e.hij(" ",e.lcZ(30,41,"Source")," "),e.xp6(2),e.Q6J("ngModel",a.sourceName),e.xp6(2),e.Q6J("ngForOf",a.sourceNames),e.xp6(4),e.hij(" ",e.lcZ(38,43,"TargetValue")," "),e.xp6(2),e.Q6J("ngModel",a.targetValueFilter),e.xp6(3),e.Oqu(e.lcZ(43,45,"All")),e.xp6(3),e.Oqu(e.lcZ(46,47,"EmptyOnes")),e.xp6(5),e.s9C("placeholder",e.lcZ(51,49,"SearchWithThreeDot")),e.Q6J("ngModel",a.filterText),e.xp6(4),e.hij(" ",e.lcZ(55,51,"Refresh")," "),e.xp6(3),e.Q6J("busyIf",a.primengTableHelper.isLoading),e.xp6(1),e.s9C("rows",a.primengTableHelper.defaultRecordsCountPerPage),e.Q6J("value",a.primengTableHelper.records)("paginator",!1)("lazy",!0)("tableStyle",e.DdM(56,X)),e.xp6(4),e.Q6J("ngIf",0==a.primengTableHelper.totalRecordsCount),e.xp6(2),e.Q6J("rows",a.primengTableHelper.defaultRecordsCountPerPage)("totalRecords",a.primengTableHelper.totalRecordsCount)("rowsPerPageOptions",a.primengTableHelper.predefinedRecordsCountPerPage)("showCurrentPageReport",!0)("currentPageReportTemplate",e.xi3(66,53,"TotalRecordsCount",a.primengTableHelper.totalRecordsCount)))},dependencies:[m.sg,m.O5,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.On,u.F,y.h,A.U,p.iA,J.jx,p.lQ,p.fz,S.D,z.$,Q,v.F],data:{animation:[(0,_.MH)()]}})),g})(),pathMatch:"full"}];let te=(()=>{var o;class g{}return o=g,(0,l.Z)(g,"\u0275fac",function(t){return new(t||o)}),(0,l.Z)(g,"\u0275mod",e.oAB({type:o})),(0,l.Z)(g,"\u0275inj",e.cJS({imports:[d.Bz.forChild(ee),d.Bz]})),g})(),ae=(()=>{var o;class g{}return o=g,(0,l.Z)(g,"\u0275fac",function(t){return new(t||o)}),(0,l.Z)(g,"\u0275mod",e.oAB({type:o})),(0,l.Z)(g,"\u0275inj",e.cJS({imports:[C.o,L.g,te]})),g})()}}]);