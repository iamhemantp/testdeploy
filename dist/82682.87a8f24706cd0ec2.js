"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[82682],{82682:(T,m,t)=>{t.r(m),t.d(m,{SessionLockScreenModule:()=>x});var i=t(81180),f=t(40031),g=t(91860),u=t(12236),h=t(41840),S=t(47530),d=t(15047),e=t(99468),v=t(44328),Z=t(3338),b=t(20005),M=t(96814),l=t(56223),L=t(42152),C=t(3291);function y(r,n){if(1&r&&e._UZ(0,"img",25),2&r){const a=e.oxw();e.Q6J("src",a.userInfo.profilePicture,e.LSH)}}function k(r,n){if(1&r&&e._UZ(0,"validation-messages",26),2&r){e.oxw();const a=e.MAs(25);e.Q6J("formCtrl",a)}}const A=[{path:"",component:(()=>{var r;class n extends h.c{constructor(s,o,c,p){super(s),(0,i.Z)(this,"_profileService",void 0),(0,i.Z)(this,"loginService",void 0),(0,i.Z)(this,"_recaptchaWrapperService",void 0),(0,i.Z)(this,"userInfo",void 0),(0,i.Z)(this,"submitting",!1),this._profileService=o,this.loginService=c,this._recaptchaWrapperService=p,this.getLastUserInfo()}ngAfterViewInit(){this._recaptchaWrapperService.setCaptchaVisibilityOnLogin()}getLastUserInfo(){let s=abp.utils.getCookieValue("userInfo");s||(location.href="");let o=JSON.parse(s);o||(location.href=""),this.loginService.authenticateModel.userNameOrEmailAddress=o.userName,this.userInfo={userName:o.userName,tenant:o.tenant,profilePicture:""},this._profileService.getProfilePictureByUserName(o.userName).subscribe(c=>{this.userInfo.profilePicture=c.profilePicture?"data:image/jpeg;base64,"+c.profilePicture:d.g.appBaseUrl+"/assets/common/images/default-profile-picture.png"},()=>{this.userInfo.profilePicture=d.g.appBaseUrl+"/assets/common/images/default-profile-picture.png"})}login(){let s=o=>{this.showMainSpinner(),this.submitting=!0,this.loginService.authenticate(()=>{this.submitting=!1,this.hideMainSpinner()},null,o)};this._recaptchaWrapperService.useCaptchaOnLogin()?this._recaptchaWrapperService.getService().execute("login").subscribe(o=>s(o)):s(null)}}return r=n,(0,i.Z)(n,"\u0275fac",function(s){return new(s||r)(e.Y36(e.zs3),e.Y36(v.qAB),e.Y36(Z.r),e.Y36(b.o))}),(0,i.Z)(n,"\u0275cmp",e.Xpm({type:r,selectors:[["app-session-lock-screen"]],features:[e.qOj],decls:38,vars:20,consts:[[1,"card","card-bordered","gutter-b","card-stretch"],[1,"card-body","text-center","pt-4"],["role","alert",1,"alert","bg-light-primary"],[1,"alert-text",2,"font-weight","bold"],[1,"fa","fa-lock","float-end","mt-1","me-5"],[1,"mt-7","pb-2"],[1,"symbol","symbol-circle","symbol-lg-75"],["class","symbol-label","alt","profileimage",3,"src",4,"ngIf"],[1,"my-2"],["href","#",1,"text-dark","fw-bold","text-hover-primary","fs-h4"],[1,"text-dark","fw-normal","fs-h4"],[1,"text-dark","fw-bold"],["method","post","novalidate","",1,"form","mt-4",3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-5"],["type","hidden","name","usernameOrEmailAddress"],["type","password","autocomplete","new-password","name","password","required","","maxlength","32",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","fs-h6",3,"ngModel","placeholder","ngModelChange"],["passwordInput","ngModel"],[3,"formCtrl",4,"ngIf"],[1,"mt-9","mb-6"],[1,"col-5","mt-2","float-start"],[1,"form-check","form-check-custom","form-check-solid","py-1"],["type","checkbox","name","rememberMe","value","true",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","submit",1,"btn","btn-primary","fw-bolder","fs-h6","col-5","float-end",3,"disabled"],["alt","profileimage",1,"symbol-label",3,"src"],[3,"formCtrl"]],template:function(s,o){if(1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4),e.ALo(5,"localize"),e._UZ(6,"i",4),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6),e.YNc(9,y,1,1,"img",7),e.qZA()(),e.TgZ(10,"div",8)(11,"a",9),e._uU(12),e.qZA()(),e.TgZ(13,"div",8)(14,"span",10),e._uU(15," Tenant: "),e.TgZ(16,"span",11),e._uU(17),e.qZA()()(),e.TgZ(18,"form",12,13),e.NdJ("ngSubmit",function(){return o.login()}),e.TgZ(20,"div",8)(21,"div",14),e._UZ(22,"input",15),e.qZA(),e.TgZ(23,"div",14)(24,"input",16,17),e.NdJ("ngModelChange",function(p){return o.loginService.authenticateModel.password=p}),e.ALo(26,"localize"),e.qZA(),e.YNc(27,k,1,1,"validation-messages",18),e.qZA()(),e.TgZ(28,"div",19)(29,"div",20)(30,"label",21)(31,"input",22),e.NdJ("ngModelChange",function(p){return o.loginService.rememberMe=p}),e.qZA(),e.TgZ(32,"span",23),e._uU(33),e.ALo(34,"localize"),e.qZA()()(),e.TgZ(35,"button",24),e._uU(36),e.ALo(37,"localize"),e.qZA()()()()()),2&s){const c=e.MAs(19),p=e.MAs(25);e.Q6J("@routerTransition",void 0),e.xp6(4),e.hij(" ",e.lcZ(5,12,"YourSessionIsLocked")," "),e.xp6(5),e.Q6J("ngIf",o.userInfo&&o.userInfo.profilePicture),e.xp6(3),e.Oqu(o.userInfo.userName),e.xp6(5),e.Oqu(o.userInfo.tenant),e.xp6(7),e.MGl("placeholder","",e.lcZ(26,14,"Password"),"*"),e.Q6J("ngModel",o.loginService.authenticateModel.password),e.xp6(3),e.Q6J("ngIf",!p.touched),e.xp6(4),e.Q6J("ngModel",o.loginService.rememberMe),e.xp6(2),e.hij(" ",e.lcZ(34,16,"RememberMe")," "),e.xp6(2),e.Q6J("disabled",!c.form.valid),e.xp6(1),e.hij(" ",e.lcZ(37,18,"LogIn")," ")}},dependencies:[M.O5,l._Y,l.Fj,l.Wl,l.JJ,l.JL,l.Q7,l.nD,l.On,l.F,L.s,C.F],styles:["app-session-lock-screen[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column}"],data:{animation:[(0,S.RP)()]}})),n})()}];let I=(()=>{var r;class n{}return r=n,(0,i.Z)(n,"\u0275fac",function(s){return new(s||r)}),(0,i.Z)(n,"\u0275mod",e.oAB({type:r})),(0,i.Z)(n,"\u0275inj",e.cJS({imports:[u.Bz.forChild(A),u.Bz]})),n})(),x=(()=>{var r;class n{}return r=n,(0,i.Z)(n,"\u0275fac",function(s){return new(s||r)}),(0,i.Z)(n,"\u0275mod",e.oAB({type:r})),(0,i.Z)(n,"\u0275inj",e.cJS({imports:[f.o,g.y,I]})),n})()}}]);