"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[36054],{36054:(D,h,s)=>{s.r(h),s.d(h,{TaxModule:()=>Y});var r=s(81180),x=s(12236),f=s(41840),b=s(64716),C=s(47530),m=s(44328),e=s(99468),v=s(96814),g=s(73552),Z=s(94901),y=s(56916),_=s(85219),A=s(51712),M=s(68989),d=s(56223),P=s(45513),w=s(42152),z=s(24142),T=s(3291);const S=["taxCreationModal"];function k(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&n){const l=e.oxw();e.xp6(1),e.AsE("",e.lcZ(2,2,"Update tax"),": ",null==l.tax?null:l.tax.name,"")}}function L(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Create new tax")))}const U=function(n){return{backdrop:"static",keyboard:n}};let N=(()=>{var n;class i extends f.c{constructor(o,t,a,c){super(o),(0,r.Z)(this,"formBuilder",void 0),(0,r.Z)(this,"businessService",void 0),(0,r.Z)(this,"taxService",void 0),(0,r.Z)(this,"modal",void 0),(0,r.Z)(this,"onModalSave",new e.vpe),(0,r.Z)(this,"taxForm",void 0),(0,r.Z)(this,"tax",void 0),(0,r.Z)(this,"businessId",void 0),(0,r.Z)(this,"saving",!1),(0,r.Z)(this,"isEditMode",!1),(0,r.Z)(this,"submitAttempt",!1),this.formBuilder=t,this.businessService=a,this.taxService=c}ngOnInit(){this.taxForm=this.formBuilder.group({taxName:["",d.kI.required],taxPercentage:["",d.kI.required],isTaxActive:[!1],tempColorApp:""}),this.businessService.getCurrentBusinessId().subscribe(o=>{this.businessId=o})}changeColor(o){document.documentElement.style.setProperty("--kt-primary",o),document.documentElement.style.setProperty("--bs-primary-active",o),document.documentElement.style.setProperty("--bs-primary",o),document.documentElement.style.setProperty("--bs-menu-color",o),document.documentElement.style.setProperty("--kt-form-check-input-checked-bg-color-solid",o),document.documentElement.style.setProperty("--kt-scrolltop-bg-color",o),document.documentElement.style.setProperty("--kt-scrolltop-bg-color-hover",o),document.documentElement.style.setProperty("--kt-primary-active",o)}saveTax(){if(this.submitAttempt=!0,this.taxForm.valid)if(this.changeColor(this.taxForm.controls.tempColorApp.value),this.saving=!0,this.isEditMode){var t;const a=new m.Hqv;a.id=null===(t=this.tax)||void 0===t?void 0:t.id,a.value=this.taxForm.controls.taxPercentage.value,a.name=this.taxForm.controls.taxName.value,a.isActive=this.taxForm.controls.isTaxActive.value||!1,this.taxService.updateOrganizationTax(a).subscribe(c=>{this.saving=!1,this.notify.info(this.l("Updated successfully")),this.onModalSave.emit(),this.closeModal()})}else{const a=new m.CPE;a.businessId=this.businessId,a.value=this.taxForm.controls.taxPercentage.value,a.name=this.taxForm.controls.taxName.value,a.isActive=this.taxForm.controls.isTaxActive.value||!1,this.taxService.createOrganizationTax(a).subscribe(c=>{this.saving=!1,this.notify.info(this.l("SavedSuccessfully")),this.onModalSave.emit(),this.closeModal()},c=>{})}}showModal(o){this.taxForm.reset(),this.submitAttempt=!1,o?(this.isEditMode=!0,this.tax=o,this.taxForm.patchValue({taxName:null==o?void 0:o.name,taxPercentage:null==o?void 0:o.value,isTaxActive:null==o?void 0:o.isActive})):this.isEditMode=!1,this.modal.show()}onFocus(){document.getElementById("taxDisplayName").focus()}closeModal(){this.modal.hide()}}return n=i,(0,r.Z)(i,"\u0275fac",function(o){return new(o||n)(e.Y36(e.zs3),e.Y36(d.qu),e.Y36(m.fGn),e.Y36(m.CGr))}),(0,r.Z)(i,"\u0275cmp",e.Xpm({type:n,selectors:[["app-tax-creation"]],viewQuery:function(o,t){if(1&o&&e.Gf(S,7),2&o){let a;e.iGM(a=e.CRH())&&(t.modal=a.first)}},outputs:{onModalSave:"onModalSave"},features:[e.qOj],decls:41,vars:30,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","taxCreationModal","aria-hidden","true",1,"modal","fade","create-or-edit-user-modal",3,"config","onShown"],["taxCreationModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[3,"formGroup"],[1,"modal-header"],[1,"modal-title"],[4,"ngIf"],["type","button",1,"btn-close",3,"disabled","click"],[1,"modal-body"],[1,"mb-5"],["for","name",1,"form-label"],["id","taxDisplayName","formControlName","taxName","type","text","name","name",1,"form-control"],[3,"formCtrl"],["for","percentage",1,"form-label"],["id","percentage","formControlName","taxPercentage","type","text","name","percentage",1,"form-control"],["for","tempColorApp",1,"form-label"],["id","tempColorApp","formControlName","tempColorApp","type","text","name","tempColorApp",1,"form-control"],[1,"form-check","form-check-custom","form-check-solid","py-1"],["id","is_tax_active","type","checkbox","name","isTaxActive","formControlName","isTaxActive",1,"form-check-input"],[1,"form-check-label"],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","fw-bold",3,"disabled","click"],["type","submit",1,"btn","btn-primary","fw-bold",3,"disabled","buttonBusy","busyText","click"],[1,"fa","fa-save"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0,1),e.NdJ("onShown",function(){return t.onFocus()}),e.TgZ(2,"div",2)(3,"div",3)(4,"form",4)(5,"div",5)(6,"h4",6),e.YNc(7,k,3,4,"span",7),e.YNc(8,L,3,3,"span",7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return t.closeModal()}),e.qZA()(),e.TgZ(10,"div",9)(11,"div",10)(12,"label",11),e._uU(13),e.ALo(14,"localize"),e.qZA(),e._UZ(15,"input",12)(16,"validation-messages",13),e.qZA(),e.TgZ(17,"div",10)(18,"label",14),e._uU(19),e.ALo(20,"localize"),e.qZA(),e._UZ(21,"input",15)(22,"validation-messages",13),e.qZA(),e.TgZ(23,"div",10)(24,"label",16),e._uU(25),e.ALo(26,"localize"),e.qZA(),e._UZ(27,"input",17),e.qZA(),e.TgZ(28,"label",18),e._UZ(29,"input",19),e.TgZ(30,"span",20),e._uU(31),e.ALo(32,"localize"),e.qZA()()(),e.TgZ(33,"div",21)(34,"button",22),e.NdJ("click",function(){return t.closeModal()}),e._uU(35),e.ALo(36,"localize"),e.qZA(),e.TgZ(37,"button",23),e.NdJ("click",function(){return t.saveTax()}),e._UZ(38,"i",24),e.TgZ(39,"span"),e._uU(40),e.qZA()()()()()()()),2&o&&(e.Q6J("config",e.VKq(28,U,!t.saving)),e.xp6(4),e.Q6J("formGroup",t.taxForm),e.xp6(3),e.Q6J("ngIf",null==t.tax?null:t.tax.id),e.xp6(1),e.Q6J("ngIf",!(null!=t.tax&&t.tax.id)),e.xp6(1),e.Q6J("disabled",t.saving),e.uIk("aria-label",t.l("Close")),e.xp6(4),e.hij("",e.lcZ(14,18,"Name")," *"),e.xp6(3),e.Q6J("formCtrl",t.taxForm.controls.taxName),e.xp6(3),e.hij("",e.lcZ(20,20,"Tax percentage (%)")," *"),e.xp6(3),e.Q6J("formCtrl",t.taxForm.controls.taxPercentage),e.xp6(3),e.hij("",e.lcZ(26,22,"TempColorApp #")," "),e.xp6(6),e.hij(" ",e.lcZ(32,24,"Activate this tax by clicking on the checkbox below")," "),e.xp6(3),e.Q6J("disabled",t.saving),e.xp6(1),e.hij(" ",e.lcZ(36,26,"Cancel")," "),e.xp6(2),e.Q6J("disabled",!t.taxForm.valid)("buttonBusy",t.saving)("busyText",t.l("SavingWithThreeDot")),e.xp6(3),e.Oqu(t.isEditMode?"Update":"Save"))},dependencies:[v.O5,d._Y,d.Fj,d.Wl,d.JJ,d.JL,P.L,w.s,z.Z,d.sg,d.u,T.F]})),i})();const F=["taxCreationModal"],H=["paginator"],O=["dataTable"];function J(n,i){1&n&&(e.TgZ(0,"tr")(1,"th",22),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"th",23),e._uU(5),e.ALo(6,"localize"),e.qZA(),e.TgZ(7,"th",23),e._uU(8),e.ALo(9,"localize"),e.qZA(),e.TgZ(10,"th",23),e._uU(11),e.ALo(12,"localize"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,4,"Actions")," "),e.xp6(3),e.hij(" ",e.lcZ(6,6,"Name")," "),e.xp6(3),e.hij(" ",e.lcZ(9,8,"Tax percentage (%)")," "),e.xp6(3),e.hij(" ",e.lcZ(12,10,"Status")," "))}function I(n,i){if(1&n){const l=e.EpF();e.TgZ(0,"ul",33)(1,"li",34)(2,"a",35),e.NdJ("click",function(){e.CHM(l);const t=e.oxw().$implicit;e.oxw();const a=e.MAs(26);return e.KtG(a.showModal(t))}),e._uU(3),e.ALo(4,"localize"),e.qZA()(),e.TgZ(5,"li",34)(6,"a",35),e.NdJ("click",function(){e.CHM(l);const t=e.oxw().$implicit,a=e.oxw();return e.KtG(a.deleteSelectedTax(t))}),e._uU(7),e.ALo(8,"localize"),e.qZA()()()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"Edit")," "),e.xp6(4),e.hij(" ",e.lcZ(8,4,"Delete")," "))}function R(n,i){if(1&n){const l=e.EpF();e.TgZ(0,"tr")(1,"td",22)(2,"div",24)(3,"button",25),e._UZ(4,"i",26)(5,"span",27),e._uU(6),e.ALo(7,"localize"),e.qZA(),e.YNc(8,I,9,6,"ul",28),e.qZA()(),e.TgZ(9,"td",23)(10,"span",29),e._uU(11),e.ALo(12,"localize"),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"td",23)(15,"span",29),e._uU(16),e.ALo(17,"localize"),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"td",23)(20,"span",29),e._uU(21),e.ALo(22,"localize"),e.qZA(),e.TgZ(23,"div",30)(24,"input",31),e.NdJ("change",function(t){const c=e.CHM(l).$implicit,p=e.oxw();return e.KtG(p.onStatusUpdate(t,c))}),e.qZA(),e.TgZ(25,"label",32),e.ynx(26),e._uU(27),e.BQk(),e.qZA()()()()}if(2&n){const l=i.$implicit;e.xp6(6),e.hij(" ",e.lcZ(7,8,"Actions")," "),e.xp6(5),e.Oqu(e.lcZ(12,10,"Name")),e.xp6(2),e.hij(" ",l.name," "),e.xp6(3),e.Oqu(e.lcZ(17,12,"Tax")),e.xp6(2),e.hij(" ",l.value," "),e.xp6(3),e.Oqu(e.lcZ(22,14,"Status")),e.xp6(3),e.Q6J("checked",l.isActive),e.xp6(3),e.hij(" ",l.isActive?"Active":"Not active"," ")}}function j(n,i){1&n&&(e.TgZ(0,"div",36),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NoData")," "))}const q=function(){return{"min-width":"50rem"}},E=[{path:"",component:(()=>{var n;class i extends f.c{constructor(o,t){super(o),(0,r.Z)(this,"taxService",void 0),(0,r.Z)(this,"taxCreationModal",void 0),(0,r.Z)(this,"paginator",void 0),(0,r.Z)(this,"dataTable",void 0),this.taxService=t}ngOnInit(){}ngAfterViewInit(){this.primengTableHelper.adjustScroll(this.dataTable)}getTax(o){var t;if(this.primengTableHelper.shouldResetPaging(o)&&(this.paginator.changePage(0),this.primengTableHelper.records&&this.primengTableHelper.records.length>0))return;this.primengTableHelper.showLoadingIndicator();const a={currentPage:(null==o?void 0:o.page)+1||1,itemsPerPage:(null===(t=this.paginator)||void 0===t?void 0:t.rows)||10};this.taxService.getTaxAll(a.currentPage,a.itemsPerPage).pipe((0,b.x)(()=>this.primengTableHelper.hideLoadingIndicator())).subscribe(c=>{this.primengTableHelper.totalRecordsCount=c.totalCount,this.primengTableHelper.records=c.items,this.primengTableHelper.hideLoadingIndicator()},c=>{this.primengTableHelper.hideLoadingIndicator()})}onStatusUpdate(o,t){var a;this.primengTableHelper.showLoadingIndicator();const c=null===(a=o.target)||void 0===a?void 0:a.checked,p=new m.Hqv;p.id=null==t?void 0:t.id,p.value=+t.value,p.name=t.name,p.isActive=c,this.taxService.updateOrganizationTax(p).subscribe(u=>{this.primengTableHelper.hideLoadingIndicator(),this.notify.info(this.l("Status updated successfully")),this.paginator.changePage(this.paginator.getPage())},u=>{this.primengTableHelper.hideLoadingIndicator(),this.notify.error(`Error: ${null==u?void 0:u.message}`)})}createTax(){this.taxCreationModal.showModal()}deleteSelectedTax(o){this.message.confirm(`Are you sure you want to delete ${null==o?void 0:o.name}`,"",t=>{t&&this.taxService.deleteTax(o.id).subscribe(a=>{this.notify.success(this.l("SuccessfullyDeleted")),this.paginator.changePage(this.paginator.getPage())},a=>{this.notify.error(`Error: ${a.message}`)})})}}return n=i,(0,r.Z)(i,"\u0275fac",function(o){return new(o||n)(e.Y36(e.zs3),e.Y36(m.CGr))}),(0,r.Z)(i,"\u0275cmp",e.Xpm({type:n,selectors:[["app-tax"]],viewQuery:function(o,t){if(1&o&&(e.Gf(F,7),e.Gf(H,7),e.Gf(O,7)),2&o){let a;e.iGM(a=e.CRH())&&(t.taxCreationModal=a.first),e.iGM(a=e.CRH())&&(t.paginator=a.first),e.iGM(a=e.CRH())&&(t.dataTable=a.first)}},features:[e.qOj],decls:27,vars:27,consts:[[1,"tax-container","container"],[1,"c-route-page-container"],[1,"p-28"],[3,"title"],["role","actions"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus","btn-md-icon"],[1,"d-none","d-md-inline-block"],[1,"card","card-custom","gutter-b"],[1,"card-body"],[1,"row","align-items-center"],[1,"primeng-datatable-container",3,"busyIf"],["sortMode","multiple","ScrollWidth","100%","scrollDirection","horizontal",3,"value","rows","paginator","lazy","scrollable","tableStyle","resizableColumns","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"primeng-paging-container"],[3,"rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","currentPageReportTemplate","onPageChange"],["paginator",""],[3,"onModalSave"],["taxCreationModal",""],[2,"min-width","130px"],[2,"min-width","150px"],["dropdown","","placement","bottom left","container","body",1,"btn-group"],["id","dropdownButton","type","button","dropdownToggle","","aria-controls","dropdownMenu",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"fa","fa-cog"],[1,"caret"],["id","dropdownMenu","class","dropdown-menu","role","menu","aria-labelledby","dropdownButton",4,"dropdownMenu"],[1,"p-column-title"],[1,"form-check","form-switch","form-check-custom","form-check-solid"],["type","checkbox","value","",1,"form-check-input","h-20px","w-35px","clickable",3,"checked","change"],["for","flexSwitchChecked",1,"form-check-label"],["id","dropdownMenu","role","menu","aria-labelledby","dropdownButton",1,"dropdown-menu"],["role","menuitem"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"primeng-no-data"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"sub-header",3),e.ALo(4,"localize"),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return t.createTax()}),e._UZ(7,"i",6),e.TgZ(8,"span",7),e._uU(9),e.ALo(10,"localize"),e.qZA()()()()()(),e.TgZ(11,"div")(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"p-table",12,13),e.NdJ("onLazyLoad",function(c){return t.getTax(c)}),e.YNc(18,J,13,12,"ng-template",14),e.YNc(19,R,28,16,"ng-template",15),e.qZA(),e.YNc(20,j,3,3,"div",16),e.TgZ(21,"div",17)(22,"p-paginator",18,19),e.NdJ("onPageChange",function(c){return t.getTax(c)}),e.ALo(24,"localize"),e.qZA()()()()()()()(),e.TgZ(25,"app-tax-creation",20,21),e.NdJ("onModalSave",function(){return t.getTax()}),e.qZA()),2&o&&(e.Q6J("@routerTransition",void 0),e.xp6(3),e.Q6J("title",e.lcZ(4,19,"Tax")),e.xp6(6),e.hij(" ",e.lcZ(10,21,"Add new tax")," "),e.xp6(2),e.Tol(t.containerClass),e.xp6(4),e.Q6J("busyIf",t.primengTableHelper.isLoading),e.xp6(1),e.s9C("rows",t.primengTableHelper.defaultRecordsCountPerPage),e.Q6J("value",t.primengTableHelper.records)("paginator",!1)("lazy",!0)("scrollable",!0)("tableStyle",e.DdM(26,q))("resizableColumns",t.primengTableHelper.resizableColumns),e.xp6(4),e.Q6J("ngIf",0==t.primengTableHelper.totalRecordsCount),e.xp6(2),e.Q6J("rows",t.primengTableHelper.defaultRecordsCountPerPage)("totalRecords",t.primengTableHelper.totalRecordsCount)("rowsPerPageOptions",t.primengTableHelper.predefinedRecordsCountPerPage)("showCurrentPageReport",!0)("currentPageReportTemplate",e.xi3(24,23,"TotalRecordsCount",t.primengTableHelper.totalRecordsCount)))},dependencies:[v.O5,g.Hz,g.Mq,g.TO,Z.U,y.iA,_.jx,A.D,M.$,N,T.F],styles:[".toolbar[_ngcontent-%COMP%]{height:55px;display:flex;align-items:center;border-top:1px solid #EFF2F5;background:#ffffff;box-shadow:0 10px 30px #523f690d;left:265px;transition:left .3s ease;padding:0 30px}.tax-container[_ngcontent-%COMP%]{background-color:#f5f8ff}.tax-container[_ngcontent-%COMP%]   .c-route-page-container[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.tax-container[_ngcontent-%COMP%]   .c-route-page-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:1.14rem}.p-28[_ngcontent-%COMP%]{padding-top:28px;padding-bottom:28px}.search[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:50%;padding-bottom:0!important;margin-bottom:0!important}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{flex-shrink:0;border-radius:12px;background:var(--Primary-Base-White, #FFF);box-shadow:0 25.787px 53.723px 4.298px #5a52800d}.text-header[_ngcontent-%COMP%]{color:#000624;font-family:Roboto;font-size:18px;font-style:normal;font-weight:600;line-height:normal}.text-des[_ngcontent-%COMP%]{color:#00062480;font-family:Roboto;font-size:10.5px;font-style:normal;font-weight:400;line-height:normal;opacity:unset!important}.container[_ngcontent-%COMP%]{padding:0!important}"],data:{animation:[(0,C.MH)()]}})),i})(),pathMatch:"full"}];let Q=(()=>{var n;class i{}return n=i,(0,r.Z)(i,"\u0275fac",function(o){return new(o||n)}),(0,r.Z)(i,"\u0275mod",e.oAB({type:n})),(0,r.Z)(i,"\u0275inj",e.cJS({imports:[x.Bz.forChild(E),x.Bz]})),i})();var B=s(40031),G=s(8387);let Y=(()=>{var n;class i{}return n=i,(0,r.Z)(i,"\u0275fac",function(o){return new(o||n)}),(0,r.Z)(i,"\u0275mod",e.oAB({type:n})),(0,r.Z)(i,"\u0275inj",e.cJS({imports:[B.o,G.g,Q]})),i})()}}]);