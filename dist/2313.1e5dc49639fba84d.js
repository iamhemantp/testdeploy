"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[2313],{2313:(Z,g,r)=>{r.r(g),r.d(g,{DynamicEntityPropertiesModule:()=>P});var a=r(81180),t=r(8387),h=r(40031),v=r(12236),p=r(26039),m=r(99468);const f=[{path:"",component:p.E,pathMatch:"full"}];let _=(()=>{var y;class d{}return y=d,(0,a.Z)(d,"\u0275fac",function(u){return new(u||y)}),(0,a.Z)(d,"\u0275mod",m.oAB({type:y})),(0,a.Z)(d,"\u0275inj",m.cJS({imports:[v.Bz.forChild(f),v.Bz]})),d})(),P=(()=>{var y;class d{}return y=d,(0,a.Z)(d,"\u0275fac",function(u){return new(u||y)}),(0,a.Z)(d,"\u0275mod",m.oAB({type:y})),(0,a.Z)(d,"\u0275inj",m.cJS({imports:[h.o,t.g,_]})),d})()},26039:(Z,g,r)=>{r.d(g,{E:()=>O});var a=r(81180),t=r(99468),h=r(41840),v=r(12236),p=r(44328),m=r(96814),f=r(94901),_=r(56916),P=r(85219),y=r(24142),d=r(9315),s=r(56223),u=r(45513),b=r(3291);const E=["createModal"];function C(n,c){if(1&n&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&n){const o=c.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.propertyName," ")}}function D(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"div")(1,"div",6)(2,"h4",7)(3,"span"),t._uU(4),t.ALo(5,"localize"),t.qZA()(),t.TgZ(6,"button",8),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.close())}),t.qZA()(),t.TgZ(7,"div",9)(8,"div",10)(9,"div",11)(10,"label",12),t._uU(11),t.ALo(12,"localize"),t.qZA(),t.TgZ(13,"select",13),t.NdJ("ngModelChange",function(i){t.CHM(o);const l=t.oxw(2);return t.KtG(l.dynamicEntityProperty.dynamicPropertyId=i)}),t.TgZ(14,"option",14),t._uU(15),t.ALo(16,"localize"),t.qZA(),t.YNc(17,C,2,2,"option",15),t.qZA()()()(),t.TgZ(18,"div",16)(19,"button",17),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.close())}),t._uU(20),t.ALo(21,"localize"),t.qZA(),t.TgZ(22,"button",18),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.save())}),t._UZ(23,"i",19),t.TgZ(24,"span"),t._uU(25),t.ALo(26,"localize"),t.qZA()()()()}if(2&n){const o=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,13,"AddNewDynamicEntityProperty")),t.xp6(2),t.Q6J("disabled",o.saving),t.uIk("aria-label",o.l("Close")),t.xp6(5),t.hij("",t.lcZ(12,15,"Parameter")," *"),t.xp6(2),t.Q6J("ngModel",o.dynamicEntityProperty.dynamicPropertyId),t.xp6(2),t.Oqu(t.lcZ(16,17,"SelectADynamicProperty")),t.xp6(2),t.Q6J("ngForOf",o.allDynamicProperties),t.xp6(2),t.Q6J("disabled",o.saving),t.xp6(1),t.hij(" ",t.lcZ(21,19,"Cancel")," "),t.xp6(2),t.Q6J("disabled",!o.dynamicEntityProperty.entityFullName||!o.dynamicEntityProperty.dynamicPropertyId)("buttonBusy",o.saving)("busyText",o.l("SavingWithThreeDot")),t.xp6(3),t.Oqu(t.lcZ(26,21,"Save"))}}function T(n,c){if(1&n&&(t.TgZ(0,"div",3)(1,"div",4),t.YNc(2,D,27,23,"div",5),t.qZA()()),2&n){const o=t.oxw();t.xp6(2),t.Q6J("ngIf",o.initialized)}}const A=function(n){return{backdrop:"static",keyboard:n}};let x=(()=>{var n;class c extends h.c{constructor(e,i,l,M){super(e),(0,a.Z)(this,"_dynamicEntityPropertyService",void 0),(0,a.Z)(this,"_dynamicPropertyService",void 0),(0,a.Z)(this,"_dynamicEntityParameterDefinitionService",void 0),(0,a.Z)(this,"modalSave",new t.vpe),(0,a.Z)(this,"modal",void 0),(0,a.Z)(this,"dynamicEntityProperty",new p.RcM),(0,a.Z)(this,"allDynamicProperties",void 0),(0,a.Z)(this,"initialized",!1),(0,a.Z)(this,"saving",!1),(0,a.Z)(this,"entityFullName",void 0),this._dynamicEntityPropertyService=i,this._dynamicPropertyService=l,this._dynamicEntityParameterDefinitionService=M}show(e){this.entityFullName=e,this.initialize(),this.dynamicEntityProperty=new p.RcM,this.dynamicEntityProperty.entityFullName=this.entityFullName,this.modal.show()}save(){this.saving=!0,this.showMainSpinner(),this.dynamicEntityProperty.tenantId=abp.session.tenantId,this._dynamicEntityPropertyService.add(this.dynamicEntityProperty).subscribe(()=>{this.notify.info(this.l("SavedSuccessfully")),this.hideMainSpinner(),this.modalSave.emit(null),this.modal.hide(),this.saving=!1},e=>{this.hideMainSpinner(),this.saving=!1})}close(){this.modal.hide()}initialize(){this.initialized=!1;let e=this._dynamicEntityPropertyService.getAllPropertiesOfAnEntity(this.entityFullName),i=this._dynamicPropertyService.getAll();this.showMainSpinner(),(0,d.D)([i,e]).subscribe(([l,M])=>{this.allDynamicProperties=l.items.filter(function(Y){return-1===M.items.map(H=>H.dynamicPropertyId).indexOf(Y.id)}),this.hideMainSpinner(),this.initialized=!0},l=>{this.hideMainSpinner()})}}return n=c,(0,a.Z)(c,"\u0275fac",function(e){return new(e||n)(t.Y36(t.zs3),t.Y36(p.kvd),t.Y36(p.ddT),t.Y36(p._5w))}),(0,a.Z)(c,"\u0275cmp",t.Xpm({type:n,selectors:[["create-dynamic-entity-property-modal"]],viewQuery:function(e,i){if(1&e&&t.Gf(E,5),2&e){let l;t.iGM(l=t.CRH())&&(i.modal=l.first)}},outputs:{modalSave:"modalSave"},features:[t.qOj],decls:3,vars:4,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","createModal","aria-hidden","true",1,"modal","fade",3,"config"],["createModal","bs-modal"],["class","modal-dialog modal-lg",4,"ngIf"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[4,"ngIf"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"disabled","click"],[1,"modal-body"],[1,"mb-5","col-12"],[1,"mb-5"],["for","Name",1,"form-label"],["required","",1,"form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","fw-bold",3,"disabled","click"],["type","button",1,"btn","btn-primary","fw-bold",3,"disabled","buttonBusy","busyText","click"],[1,"fa","fa-save"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0,1),t.YNc(2,T,3,1,"div",2),t.qZA()),2&e&&(t.Q6J("config",t.VKq(2,A,!i.saving)),t.xp6(2),t.Q6J("ngIf",i.initialized))},dependencies:[m.sg,m.O5,s.YN,s.Kr,s.EJ,s.JJ,s.Q7,s.On,u.L,y.Z,b.F],encapsulation:2})),c})();var S=r(83410);const N=["createDynamicEntityPropertyModal"],z=["createModal"];function J(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.addNewDynamicEntityProperty())}),t._UZ(1,"i",23),t._uU(2),t.ALo(3,"localize"),t.qZA()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"AddNewDynamicEntityProperty")," "))}function w(n,c){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.ALo(3,"localize"),t.qZA(),t._UZ(4,"th",24),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"DynamicProperty")))}function F(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.deleteDynamicEntityProperty(i.id))}),t._uU(1),t.ALo(2,"localize"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Delete")," "))}function L(n,c){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,F,3,3,"button",25),t.ALo(5,"permission"),t.qZA()()),2&n){const o=c.$implicit;t.xp6(2),t.hij(" ",o.dynamicPropertyName," "),t.xp6(2),t.Q6J("ngIf",t.lcZ(5,2,"Pages.Administration.DynamicEntityProperties.Delete"))}}function I(n,c){1&n&&(t.TgZ(0,"div",27),t._uU(1),t.ALo(2,"localize"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NoData")," "))}const Q=function(){return{backdrop:"static"}},U=function(){return{"min-width":"100%"}};let O=(()=>{var n;class c extends h.c{constructor(e,i,l){super(e),(0,a.Z)(this,"_activatedRoute",void 0),(0,a.Z)(this,"_dynamicEntityPropertyService",void 0),(0,a.Z)(this,"onPropertyChange",new t.vpe),(0,a.Z)(this,"createDynamicEntityPropertyModal",void 0),(0,a.Z)(this,"modal",void 0),(0,a.Z)(this,"entityFullName",void 0),this._activatedRoute=i,this._dynamicEntityPropertyService=l}show(e){this.entityFullName=e,this.getDynamicEntityProperties(),this.modal.show()}handlePropertyChanges(){this.onPropertyChange.emit(null),this.getDynamicEntityProperties()}getDynamicEntityProperties(){this.showMainSpinner(),this._dynamicEntityPropertyService.getAllPropertiesOfAnEntity(this.entityFullName).subscribe(e=>{this.primengTableHelper.totalRecordsCount=e.items.length,this.primengTableHelper.records=e.items,this.primengTableHelper.hideLoadingIndicator(),this.hideMainSpinner()},e=>{this.hideMainSpinner()})}addNewDynamicEntityProperty(){this.createDynamicEntityPropertyModal.show(this.entityFullName)}deleteDynamicEntityProperty(e){this.message.confirm(this.l("DeleteDynamicPropertyMessage"),this.l("AreYouSure"),i=>{i&&this._dynamicEntityPropertyService.delete(e).subscribe(()=>{abp.notify.success(this.l("SuccessfullyDeleted")),this.handlePropertyChanges()})})}close(){this.modal.hide()}}return n=c,(0,a.Z)(c,"\u0275fac",function(e){return new(e||n)(t.Y36(t.zs3),t.Y36(v.gz),t.Y36(p.kvd))}),(0,a.Z)(c,"\u0275cmp",t.Xpm({type:n,selectors:[["manage-dynamic-entity-property-modal"]],viewQuery:function(e,i){if(1&e&&(t.Gf(N,5),t.Gf(z,5)),2&e){let l;t.iGM(l=t.CRH())&&(i.createDynamicEntityPropertyModal=l.first),t.iGM(l=t.CRH())&&(i.modal=l.first)}},outputs:{onPropertyChange:"onPropertyChange"},features:[t.qOj],decls:28,vars:20,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","createModal","aria-hidden","true",1,"modal","fade",3,"config"],["createModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-12",2,"height","40px"],["class","btn btn-primary float-end",3,"click",4,"ngIf"],[1,"clear-fix"],[1,"d-flex","w-100"],[1,"col","primeng-datatable-container",3,"busyIf"],[3,"value","rows","paginator","lazy","tableStyle","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","fw-bold",3,"click"],[3,"modalSave"],["createDynamicEntityPropertyModal",""],[1,"btn","btn-primary","float-end",3,"click"],[1,"fa","fa-plus"],[2,"width","100px"],["class","btn btn-danger bt-sm",3,"click",4,"ngIf"],[1,"btn","btn-danger","bt-sm",3,"click"],[1,"primeng-no-data"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5)(6,"span"),t._uU(7),t.ALo(8,"localize"),t.qZA()(),t.TgZ(9,"button",6),t.NdJ("click",function(){return i.close()}),t.qZA()(),t.TgZ(10,"div",7)(11,"div",8),t.YNc(12,J,4,3,"button",9),t.ALo(13,"permission"),t.qZA(),t._UZ(14,"div",10),t.TgZ(15,"div",11)(16,"div",12)(17,"p-table",13,14),t.NdJ("onLazyLoad",function(){return i.getDynamicEntityProperties()}),t.YNc(19,w,5,3,"ng-template",15),t.YNc(20,L,6,4,"ng-template",16),t.qZA(),t.YNc(21,I,3,3,"div",17),t.qZA()()(),t.TgZ(22,"div",18)(23,"button",19),t.NdJ("click",function(){return i.close()}),t._uU(24),t.ALo(25,"localize"),t.qZA()()()()(),t.TgZ(26,"create-dynamic-entity-property-modal",20,21),t.NdJ("modalSave",function(){return i.handlePropertyChanges()}),t.qZA()),2&e&&(t.Q6J("config",t.DdM(18,Q)),t.xp6(7),t.Oqu(t.lcZ(8,12,"AddNewDynamicEntityProperty")),t.xp6(2),t.uIk("aria-label",i.l("Close")),t.xp6(3),t.Q6J("ngIf",t.lcZ(13,14,"Pages.Administration.DynamicEntityProperties.Create")),t.xp6(4),t.Q6J("busyIf",i.primengTableHelper.isLoading),t.xp6(1),t.s9C("rows",i.primengTableHelper.defaultRecordsCountPerPage),t.Q6J("value",i.primengTableHelper.records)("paginator",!1)("lazy",!0)("tableStyle",t.DdM(19,U)),t.xp6(4),t.Q6J("ngIf",0==i.primengTableHelper.totalRecordsCount),t.xp6(3),t.hij(" ",t.lcZ(25,16,"Close")," "))},dependencies:[m.O5,f.U,_.iA,P.jx,y.Z,x,b.F,S.a],encapsulation:2})),c})()}}]);