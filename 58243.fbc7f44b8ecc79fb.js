"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[58243],{58243:(P,h,l)=>{l.r(h),l.d(h,{WebhookEventDetailModule:()=>R});var d=l(81180),m=l(8387),b=l(40031),s=l(12236),v=l(41840),g=l(47530),e=l(99468),u=l(44328),_=l(96814),Z=l(56842),c=l(73552),x=l(94901),f=l(56916),k=l(85219),T=l(68989),A=l(85082),w=l(88922),E=l(3291),M=l(83410);const D=["detailModal"];function C(t,i){if(1&t&&(e.TgZ(0,"div",29),e._uU(1),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.webhookEvent.data," ")}}function W(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",29)(1,"p")(2,"span",30),e._uU(3),e.qZA(),e.TgZ(4,"span",31),e._uU(5),e.qZA()(),e.TgZ(6,"button",32),e.NdJ("click",function(){e.CHM(o);const a=e.oxw(2);return e.KtG(a.showMoreData())}),e._uU(7),e.ALo(8,"localize"),e.qZA()()}if(2&t){const o=e.oxw(2);e.xp6(3),e.hij("",o.webhookEvent.data.slice(0,o.maxDataLength),". . ."),e.xp6(2),e.hij(" ",o.webhookEvent.data," "),e.xp6(2),e.hij(" ",e.lcZ(8,3,"ShowData")," ")}}function S(t,i){if(1&t&&(e.TgZ(0,"div",9)(1,"div",24)(2,"label",25),e._uU(3),e.ALo(4,"localize"),e.qZA(),e.TgZ(5,"div",26),e._uU(6),e.qZA()(),e.TgZ(7,"div",24)(8,"label",25),e._uU(9),e.ALo(10,"localize"),e.qZA(),e.TgZ(11,"div",26),e._uU(12),e.ALo(13,"luxonFormat"),e.qZA()(),e.TgZ(14,"div",27)(15,"label",25),e._uU(16),e.ALo(17,"localize"),e.qZA(),e.YNc(18,C,2,1,"div",28),e.YNc(19,W,9,5,"div",28),e.qZA()()),2&t){const o=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,7,"WebhookEvent")),e.xp6(3),e.hij(" ",o.webhookEvent.webhookName," "),e.xp6(3),e.Oqu(e.lcZ(10,9,"CreationTime")),e.xp6(3),e.hij(" ",e.xi3(13,11,o.webhookEvent.creationTime,"F")," "),e.xp6(4),e.Oqu(e.lcZ(17,14,"Data")),e.xp6(2),e.Q6J("ngIf",o.webhookEvent.data.length<=o.maxDataLength),e.xp6(1),e.Q6J("ngIf",o.webhookEvent.data.length>o.maxDataLength)}}function y(t,i){1&t&&(e.TgZ(0,"tr")(1,"th",33),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"th",34),e._uU(5),e.ALo(6,"localize"),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.ALo(9,"localize"),e.qZA(),e.TgZ(10,"th",35),e._uU(11),e.ALo(12,"localize"),e.qZA(),e.TgZ(13,"th",36),e._uU(14),e.ALo(15,"localize"),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.ALo(18,"localize"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,6,"Actions")),e.xp6(3),e.Oqu(e.lcZ(6,8,"WebhookSubscriptionId")),e.xp6(3),e.Oqu(e.lcZ(9,10,"WebhookEndpoint")),e.xp6(3),e.Oqu(e.lcZ(12,12,"CreationTime")),e.xp6(3),e.Oqu(e.lcZ(15,14,"HttpStatusCode")),e.xp6(3),e.Oqu(e.lcZ(18,16,"Response")))}function L(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"li",45)(1,"a",46),e.NdJ("click",function(){e.CHM(o);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.resend(a.id))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Resend")," "))}function U(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"ul",43),e.YNc(1,L,4,3,"li",44),e.ALo(2,"permission"),e.TgZ(3,"li",45)(4,"a",46),e.NdJ("click",function(){e.CHM(o);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.goToWebhookSubscriptionDetail(a.webhookSubscriptionId))}),e._uU(5),e.ALo(6,"localize"),e.qZA()()()}2&t&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,"Pages.Administration.Webhook.ResendWebhook")),e.xp6(4),e.hij(" ",e.lcZ(6,4,"GoToSubscription")," "))}function z(t,i){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij(" ",o.response," ")}}function q(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"span")(1,"button",47),e.NdJ("click",function(){e.CHM(o);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.showDetailModal(a.response))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"ShowResponse")," "))}function I(t,i){if(1&t&&(e.TgZ(0,"tr")(1,"td")(2,"div",37)(3,"button",38),e._UZ(4,"i",39)(5,"span",40),e.qZA(),e.YNc(6,U,7,6,"ul",41),e.qZA()(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"luxonFormat"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e.YNc(17,z,2,1,"span",42),e.YNc(18,q,4,3,"span",42),e.qZA()()),2&t){const o=i.$implicit,n=e.oxw();e.xp6(8),e.hij(" ",o.webhookSubscriptionId," "),e.xp6(2),e.hij(" ",o.webhookUri," "),e.xp6(2),e.hij(" ",e.xi3(13,6,o.creationTime,"yyyy-LL-dd HH:mm:ss")," "),e.xp6(3),e.hij(" ",o.responseStatusCode," "),e.xp6(2),e.Q6J("ngIf",(null==o||null==o.response?null:o.response.length)<=n.listMaxResponseLength),e.xp6(1),e.Q6J("ngIf",(null==o||null==o.response?null:o.response.length)>n.listMaxResponseLength)}}function O(t,i){1&t&&(e.TgZ(0,"div",48),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NoData")," "))}const j=function(){return{"min-width":"50rem"}},J=[{path:"",component:(()=>{var t;class i extends v.c{constructor(n,a,r,p,Y){super(n),(0,d.Z)(this,"_webhookEventService",void 0),(0,d.Z)(this,"_webhookSendAttemptService",void 0),(0,d.Z)(this,"_router",void 0),(0,d.Z)(this,"_activatedRoute",void 0),(0,d.Z)(this,"detailModal",void 0),(0,d.Z)(this,"subscription",void 0),(0,d.Z)(this,"loading",!0),(0,d.Z)(this,"webhookEventId",void 0),(0,d.Z)(this,"webhookEvent",void 0),(0,d.Z)(this,"maxDataLength",300),(0,d.Z)(this,"listMaxResponseLength",100),(0,d.Z)(this,"detailModalText",""),this._webhookEventService=a,this._webhookSendAttemptService=r,this._router=p,this._activatedRoute=Y}ngOnInit(){this.webhookEventId=this._activatedRoute.snapshot.queryParams.id,this.getDetail()}getSendAttempts(n){this.primengTableHelper.showLoadingIndicator(),this._webhookSendAttemptService.getAllSendAttemptsOfWebhookEvent(this.webhookEventId).subscribe(a=>{this.primengTableHelper.totalRecordsCount=a.items.length,this.primengTableHelper.records=a.items,this.primengTableHelper.hideLoadingIndicator()})}getDetail(){this._webhookEventService.get(this.webhookEventId).subscribe(n=>{this.webhookEvent=n,this.loading=!1})}goToWebhookSubscriptionDetail(n){this._router.navigate(["app/admin/webhook-subscriptions-detail"],{queryParams:{id:n}})}resend(n){this.message.confirm(this.l("WebhookEventWillBeSendWithSameParameters"),this.l("AreYouSure"),a=>{a&&(this.showMainSpinner(),this._webhookSendAttemptService.resend(n).subscribe(()=>{abp.notify.success(this.l("WebhookSendAttemptInQueue")),this.hideMainSpinner()},()=>{this.hideMainSpinner()}))})}showDetailModal(n){this.detailModalText=n,this.detailModal.show()}showMoreData(){document.getElementById("dataDots").classList.add("d-none"),document.getElementById("dataShowMoreBtn").classList.add("d-none"),document.getElementById("dataMore").classList.remove("d-none")}}return t=i,(0,d.Z)(i,"\u0275fac",function(n){return new(n||t)(e.Y36(e.zs3),e.Y36(u.mVG),e.Y36(u.JYj),e.Y36(s.F0),e.Y36(s.gz))}),(0,d.Z)(i,"\u0275cmp",e.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(n,a){if(1&n&&e.Gf(D,7),2&n){let r;e.iGM(r=e.CRH())&&(a.detailModal=r.first)}},features:[e.qOj],decls:31,vars:19,consts:[[3,"title"],[1,"card","card-custom","gutter-b"],["class","card-body",4,"ngIf"],[1,"card-header","align-items-center","border-0","mt-4"],[1,"card-title","align-items-start","flex-column"],[1,"fw-bolder","text-dark"],[1,"card-toolbar"],[1,"btn","btn-outline-brand","btn-sm","btn-icon","btn-icon-md",3,"click"],[1,"flaticon2-refresh"],[1,"card-body"],[1,"row","align-items-center"],[1,"col","primeng-datatable-container",3,"busyIf"],[3,"value","rows","paginator","lazy","tableStyle","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[3,"modalSave"],["createOrEditWebhookSubscriptionModal",""],["bsModal","","id","detailModal","tabindex","-1","role","dialog","aria-labelledby","detailModal","aria-hidden","true",1,"modal","fade"],["detailModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"mb-5","row"],[1,"col-2","col-form-label"],[1,"col-10"],[1,"row","mb-2"],["class","col-10 text-break",4,"ngIf"],[1,"col-10","text-break"],["id","dataDots"],["id","dataMore",1,"d-none"],["id","dataShowMoreBtn",1,"btn","btn-outline-primary","btn-sm",3,"click"],[2,"width","100px"],[2,"width","320px"],[2,"width","180px"],[2,"width","130px"],["dropdown","","placement","bottom left",1,"btn-group"],["id","dropdownButton","type","button","dropdownToggle","","aria-controls","dropdownMenu",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"fa","fa-cog"],[1,"caret"],["id","dropdownMenu","class","dropdown-menu","role","menu","aria-labelledby","dropdownButton",4,"dropdownMenu"],[4,"ngIf"],["id","dropdownMenu","role","menu","aria-labelledby","dropdownButton",1,"dropdown-menu"],["role","menuitem",4,"ngIf"],["role","menuitem"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"primeng-no-data"]],template:function(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"sub-header",0),e.ALo(2,"localize"),e.TgZ(3,"div")(4,"div",1),e.YNc(5,S,20,16,"div",2),e.qZA(),e.TgZ(6,"div",1)(7,"div",3)(8,"h3",4)(9,"span",5),e._uU(10),e.ALo(11,"localize"),e.qZA()(),e.TgZ(12,"div",6)(13,"button",7),e.NdJ("click",function(){return a.getSendAttempts()}),e._UZ(14,"i",8),e.qZA()()(),e.TgZ(15,"div",9)(16,"div",10)(17,"div",11)(18,"p-table",12,13),e.NdJ("onLazyLoad",function(p){return a.getSendAttempts(p)}),e.YNc(20,y,19,18,"ng-template",14),e.YNc(21,I,19,9,"ng-template",15),e.qZA(),e.YNc(22,O,3,3,"div",16),e.qZA()()()(),e.TgZ(23,"create-or-edit-webhook-subscription",17,18),e.NdJ("modalSave",function(){return a.getDetail()}),e.qZA(),e.TgZ(25,"div",19,20)(27,"div",21)(28,"div",22)(29,"div",23),e._uU(30),e.qZA()()()()()()),2&n&&(e.Q6J("@routerTransition",void 0),e.xp6(1),e.Q6J("title",e.lcZ(2,14,"WebhookEventDetail")),e.xp6(2),e.Tol(a.containerClass),e.xp6(2),e.Q6J("ngIf",a.webhookEvent),e.xp6(5),e.Oqu(e.lcZ(11,16,"WebhookSendAttempts")),e.xp6(7),e.Q6J("busyIf",a.primengTableHelper.isLoading),e.xp6(1),e.s9C("rows",a.primengTableHelper.defaultRecordsCountPerPage),e.Q6J("value",a.primengTableHelper.records)("paginator",!1)("lazy",!0)("tableStyle",e.DdM(18,j)),e.xp6(4),e.Q6J("ngIf",0==a.primengTableHelper.totalRecordsCount),e.xp6(8),e.hij(" ",a.detailModalText," "))},dependencies:[_.O5,Z.oB,c.Hz,c.Mq,c.TO,x.U,f.iA,k.jx,T.$,A.s,w.n,E.F,M.a],styles:["#portlet-detail[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:8px}.primeng-datatable-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .primeng-datatable-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}#detailModal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{overflow-wrap:break-word}"],data:{animation:[(0,g.MH)()]}})),i})(),pathMatch:"full"}];let N=(()=>{var t;class i{}return t=i,(0,d.Z)(i,"\u0275fac",function(n){return new(n||t)}),(0,d.Z)(i,"\u0275mod",e.oAB({type:t})),(0,d.Z)(i,"\u0275inj",e.cJS({imports:[s.Bz.forChild(J),s.Bz]})),i})();var H=l(68565);let R=(()=>{var t;class i{}return t=i,(0,d.Z)(i,"\u0275fac",function(n){return new(n||t)}),(0,d.Z)(i,"\u0275mod",e.oAB({type:t})),(0,d.Z)(i,"\u0275inj",e.cJS({imports:[b.o,m.g,N,H.WebhookSubscriptionModule]})),i})()}}]);